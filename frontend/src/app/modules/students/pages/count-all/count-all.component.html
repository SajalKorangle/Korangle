<div class="card-content table-responsive">
    <b>Define custom rows and columns or choose from saved tables</b>
    <!-- Starts: Print && Download Buttons Section -->
    <br *ngIf="htmlRenderer.isMobile()"/>
    <ng-container *ngIf="rowFilters.length > 0 || columnFilters.length > 0">
        <button
            id="print-list"
            type="button"
            class="btn btn-{{ user.activeSchool.secondaryThemeColor }}"
            [ngStyle]="{ 'padding': '12px 15px', 'margin-left': htmlRenderer.isMobile() ? '0%' : '5%'}"
            matTooltip="Print the following table"
            tooltip-position="left"
        >
            Print<i class="material-icons" style="margin-left: 17px">print</i>
        </button>

        <button
            type="button"
            id="download"
            class="btn btn-{{ user.activeSchool.secondaryThemeColor }}"
            style="padding: 12px 15px; margin-left: 5%;"
            matTooltip="Download the following table"
            tooltip-position="left"
            (click)="downloadList()"
        >
            Download<i class="material-icons" style="margin-left: 15px">save_alt</i>
        </button>
    </ng-container>
    <!--  Ends: Print && Download Buttons Section -->

    <br /><br /><b>Table Format</b><br />
    <!--Starts: Generated Tables List -->
    <mat-form-field style="margin-right: 15px">
        <mat-select placeholder="{{tableFormatTitle ? tableFormatTitle : 'Not Selected'}}" id="select-class" style="width: 100%">
            <ng-container *ngFor="let table of tableList">
                <mat-option (click)="htmlRenderer.tableOpenClicked(table)" style="width: 100%">
                    {{ table.formatName }}
                </mat-option>
            </ng-container>
        </mat-select>
    </mat-form-field>
    <!-- Ends: Generated Tables List -->

    <!-- Starts: Table -->
    <ng-container *ngIf="!isLoading">
        <cdk-virtual-scroll-viewport itemSize="0" class="example-viewport">
            <table class="table">
                <!-- Starts: Table Header -->
                <thead>
                    <tr cdkDropList cdkDropListOrientation="horizontal" class="example-list" (cdkDropListDropped)="dropColumn($event)">
                        <th class="minWidth"></th>
                        <th *ngFor="let filter of columnFilters" (click)="whereToAdd = 'col'; openChangeDialog(filter)" class="text-{{ user.activeSchool.secondaryThemeColor }} minWidth" cdkDrag>
                            {{filter.name}} (<span>{{filter.totalCount}}</span>)
                        </th>
                        <th (click)="whereToAdd = 'col'; openDialog()" class="text-{{ user.activeSchool.secondaryThemeColor }} minWidth">
                            + Column
                        </th>
                    </tr>
                </thead>
                <!-- Ends: Table Header -->

                <!-- Starts: Table Body -->
                <tbody cdkDropList class="example-list" (cdkDropListDropped)="dropRow($event)">
                    <tr class="example-box" *ngFor="let filter of rowFilters" cdkDrag>
                        <th (click)="whereToAdd = 'row'; openChangeDialog(filter)" class="text-{{ user.activeSchool.secondaryThemeColor }} minWidth">
                            {{filter.name}} (<span>{{filter.totalCount}}</span>)
                        </th>
                        <td class="minWidth" *ngFor="let ans of filter.answer">
                            {{ans}}
                        </td>
                        <td class="minWidth">-</td>
                    </tr>
                    <tr class="last-child">
                        <th (click)="whereToAdd = 'row'; openDialog()" class="text-{{ user.activeSchool.secondaryThemeColor }} minWidth">
                            + Row
                        </th>
                        <td class="minWidth" *ngFor="let filter of columnFilters">-</td>
                        <td class="minWidth">-</td>
                    </tr>
                </tbody>
                <!-- Ends: Table Body -->
            </table>
        </cdk-virtual-scroll-viewport>
    </ng-container>
    <!-- End of Table -->
</div>

<div *ngIf="!htmlRenderer.isMobile()" style="border-bottom: 2px solid rgba(0, 0, 0, 0.1);"></div>

<!-- Starts: Save Button -->
<ng-container *ngIf="!isTableEditing">
    <button *ngIf="rowFilters.length > 0 || columnFilters.length > 0"
        type="button"
        (click)="openSaveFormatDialog()"
        class="btn btn-{{ user.activeSchool.secondaryThemeColor }}"
        style="padding: 7px 17px; font-size: 1.3rem; float: right; margin-right: 25px;"
    >
        Save Table Format
    </button>
</ng-container>
<!-- Ends: Save Button -->

<!-- Starts: Update Changes  &&  Save As Buttons Section -->
<ng-container *ngIf="isTableEditing">
    <button type="button"
        (click)="updateChangesClicked()"
        class="btn btn-{{ user.activeSchool.secondaryThemeColor }}"
        style="padding: 7px 17px; font-size: 1.3rem; float: right; margin-right: 25px;"
    >
        Update Changes
    </button>

    <button type="button"
        (click)="saveAsClicked()"
        class="btn btn-{{ user.activeSchool.secondaryThemeColor }}"
        style="padding: 7px 17px; font-size: 1.3rem; float: right; margin-right: 25px;"
    >
        Save As
    </button>
</ng-container>
<!-- Ends: Update Changes  &&  Save As Buttons Section -->

<!-- Starts: Spinner -->
<ng-container *ngIf="isLoading">
    <app-loading-spinner [user]="user"></app-loading-spinner>
</ng-container>
<!-- Ends: Spinner -->
