<h2 mat-dialog-title>Payment</h2>
<mat-dialog-content
    style="min-height: 50vh; max-height: 80vh; min-width: max(65vw, 320px); max-width: 80vw; overflow: auto;">
    <div style="width: 100%; overflow-x: hidden; overflow-y: auto;">
        <table class="table table-hover">
            <thead>
                <th>Title</th>
                <th style="text-align: center;">Amount</th>
            </thead>
            <tbody>
                <ng-container *ngFor="let student of data.vm.selectedStudentList">
                    <tr>
                        <td>
                            <h3>{{student.name}}</h3>
                        </td>
                        <td style="text-align: right;">
                            <mat-form-field style="width: 100px;">
                                <mat-label>Amount</mat-label>
                                <input matInput type="number" [(ngModel)]="amountMappedByStudntId[student.id]"
                                    (ngModelChange)="handleOverallPaymentChange(student)"
                                    [errorStateMatcher]="{isErrorState: amountError(student)}">
                                <mat-error>Invalid Amount</mat-error>
                            </mat-form-field>
                        </td>
                    </tr>
                    <ng-container *ngFor="let session of data.vm.sessionList">
                        <ng-container *ngIf="getSessionFilteredSubFeeReceiptList(student, session).length>0">
                            <tr>
                                <td colspan="2">Session: {{session.name}}</td>
                            </tr>

                            <tr *ngFor="let subFeeReceipt of getSessionFilteredSubFeeReceiptList(student, session)">
                                <td>
                                    {{getFeeTypeFromSubFeeReceipt(subFeeReceipt).name}}
                                </td>
                                <td align="right">
                                    {{getTotalInstallmentAmount(subFeeReceipt)}}
                                </td>
                            </tr>
                        </ng-container>
                    </ng-container>

                    <tr *ngIf="newSubFeeReceiptListMappedByStudntId[student.id].length>0">
                        <td>Late Fee</td>
                        <td align="right">{{getNewSubFeeReceiptTotalLateFee(student)}}</td>
                    </tr>
                </ng-container>
                <tr>
                    <td>
                        <h4>Total</h4>
                    </td>
                    <td align="right">
                        <h4>{{getOverallTotalPaymntAmount()}}</h4>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <mat-form-field style="float: right;">
        <mat-label>Email</mat-label>
        <input matInput type="email" [(ngModel)]="email" [pattern]="validatorRegex.email">
    </mat-form-field>

    <button mat-button class="btn"
        style="background-color: blue; color: white; display: block; margin-left: auto; margin-top: 16px;"
        cdkFocusInitial (click)="apply()">
        Checkout
    </button>

</mat-dialog-content>