<h2 mat-dialog-title>Inventory</h2>
<mat-dialog-content style="height: 62vh; width: 75vw">

    <ng-container *ngIf="!activeLayoutType else LAYOUTS_CHOOSER">
        <ng-container *ngFor="let layoutType of layoutTypeList">
            <div style="text-align: center; display: inline-block; padding: 4px; width: 160px; margin: 6px; cursor: default; border-radius: 5px; user-select: none;"
                [class.active-folder]="clickedLayoutFolderType==layoutType" (dblclick)="activeLayoutType=layoutType"
                (click)="clickedLayoutFolderType=layoutType">
                <mat-icon style="font-size: 48px; height: fit-content; width: fit-content; color: rgb(49, 208, 255);">
                    folder</mat-icon><br />
                <span>{{layoutType}}</span>
            </div>
        </ng-container>
    </ng-container>

    <ng-template #LAYOUTS_CHOOSER>
        <mat-tab-group mat-align-tabs="center" (selectedTabChange)="resetSelection()">
            <mat-tab label="My Layouts">
                <div style="display: flex; flex-wrap: wrap; padding-top: 6px">
                    <div style="text-align: center; max-width: 150px; cursor: pointer; margin: 4px" (click)="newLayout()">
                        <!-- -1 index is representing new layout-->
                        <div style="
                            background-color: lightgrey;
                            height: 150px;
                            width: 102px;
                            margin: 4px 12px;
                            border: solid 3px;
                            display: table-cell;
                            vertical-align: middle;
                        " [style.borderColor]="selectedLayout && !selectedLayout.id ? 'blue' : 'lightgrey'">
                            <span class="material-icons" style="font-size: xx-large">add</span>
                        </div>
                        <span>New Layout</span>
                    </div>

                    <ng-container *ngFor="let layout of getTypeFilteredMyLayoutList(); let i = index">
                        <div style="text-align: center; max-width: 105px; cursor: pointer; margin: 4px" (click)="selectedLayout = layout">
                            <div style="
                                height: 150px;
                                width: 102px;
                                margin: 4px 12px;
                                background-color: lightgrey;
                                display: table-cell;
                                vertical-align: middle;
                                text-align: center;
                                border: solid 3px;
                                position: relative;
                            " [style.borderColor]="selectedLayout == layout ? 'blue' : 'lightgrey'">
                                <img [src]="layout.thumbnail" style="display: block; max-height: 144px; width: 96px; position: relative; z-index: 2"
                                    alt="preview unavailable" />
                                <div style="
                                    height: 150px;
                                    width: 102px;
                                    display: flex;
                                    align-items: center;
                                    position: absolute;
                                    left: 0;
                                    top: 0;
                                    z-index: 1;
                                ">
                                    <mat-spinner diameter="20" style="margin: auto"></mat-spinner>
                                </div>
                            </div>
                            <span>{{ layout.name }}</span>
                        </div>
                    </ng-container>
                </div>
            </mat-tab>

            <mat-tab label="Public">
                <div style="display: flex; flex-wrap: wrap; padding-top: 6px">
                    <ng-container *ngFor="let layout of getTypeFilteredSharedWithMeLayoutList(); let i = index">
                        <div style="text-align: center; max-width: 150px; cursor: pointer" (click)="selectedLayout = layout">
                            <div style="height: 150px; width: 102px; margin: 4px 12px; border: solid 3px"
                                [style.borderColor]="selectedLayout == layout ? 'blue' : 'lightgrey'">
                                <img [src]="layout.thumbnail" style="display: block; max-height: 144px; width: 96px" alt="preview unavailable" />
                                <div style="
                                    height: 144px;
                                    width: 96px;
                                    display: flex;
                                    align-items: center;
                                    position: absolute;
                                    left: 0;
                                    top: 0;
                                    z-index: -1;
                                ">
                                    <mat-spinner diameter="25" style="margin: auto"></mat-spinner>
                                </div>
                            </div>
                            <span>{{ layout.name }}</span>
                        </div>
                    </ng-container>
                </div>
            </mat-tab>

            <mat-tab label="Shared with me">
                <div style="display: flex; flex-wrap: wrap; padding-top: 6px">
                    <ng-container *ngFor="let layout of getTypeFilteredSharedWithMeLayoutList(); let i = index">
                        <div style="text-align: center; max-width: 150px; cursor: pointer" (click)="selectedLayout = layout">
                            <div style="height: 150px; width: 102px; margin: 4px 12px; border: solid 3px"
                                [style.borderColor]="selectedLayout == layout ? 'blue' : 'lightgrey'">
                                <img [src]="layout.thumbnail" style="display: block; max-height: 144px; width: 96px" alt="preview unavailable" />
                                <div style="
                                    height: 144px;
                                    width: 96px;
                                    display: flex;
                                    align-items: center;
                                    position: absolute;
                                    left: 0;
                                    top: 0;
                                    z-index: -1;
                                ">
                                    <mat-spinner diameter="25" style="margin: auto"></mat-spinner>
                                </div>
                            </div>
                            <span>{{ layout.name }}</span>
                        </div>
                    </ng-container>
                </div>
            </mat-tab>
        </mat-tab-group>
    </ng-template>
</mat-dialog-content>
<div mat-dialog-actions style="color: white" *ngIf="activeLayoutType">
    <span style="display: inline-block; margin-left: auto"></span>
    <button mat-button *ngIf="isMyLayout()" (click)="copyAndApply()" class="btn" style="background-color: blue" cdkFocusInitial>
        Duplicate
    </button>
    <button mat-button (click)="apply()" class="btn" style="background-color: blue" cdkFocusInitial>Apply</button>
</div>