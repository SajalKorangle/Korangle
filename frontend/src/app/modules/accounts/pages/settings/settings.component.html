<div *ngIf="!isLoading"class="card-content table-responsive" >

    <div *ngIf="!isInitialLoading">
        <div class="row">
            <h4 style="margin-left: 15px;"><b>Employee Permissions</b></h4>
            <div class="col-md-6">
                <app-employee-filter [user]="user"
                            [showAllEmployees]="true"
                            (employee)="serviceAdapter.getEmployeeAmount($event)"
                            ></app-employee-filter>
                <div class="row col-md-12"  *ngIf="selectedEmployee != null">
                    <span style="font-family: Roboto;font-style: normal;font-weight: normal;font-size: 15px;">Amount Restriction :  </span>
                    <mat-form-field> 
                    <input type="number" 
                            (blur)="serviceAdapter.changeAmountRestriction()"
                            matInput [ngModel]="selectedEmployeeAmount" 
                            (ngModelChange)="selectedEmployeeAmount=$event;" 
                            placeholder="Enter Amount">
                    </mat-form-field><br>
                    <div *ngIf="isUpdating" class="loader-custom"></div>
                    <span *ngIf="selectedEmployeeAmount == null"  
                            style="color: rgb(221, 160, 27); margin-left: 10px">
                    <i class="material-icons" style="vertical-align: -6px;">error_outline</i>
                        No Restriction Given Yet</span>
                </div>
            </div>
        
            <div class="col-md-6">
                <button class="custom-button" style="margin-top: 10px;background:rgba(255, 152, 0, 1); color: white; padding: 6px 4px 2px 5px" (click)="serviceAdapter.regenerateVoucherNumber(); ">Regenerate Voucher Number</button>
                <div *ngIf="isUpdating" class="loader-custom"></div>
            </div>
        </div>

        <hr>
        <h4><b>Lock Accounts</b></h4>
        <span  style="color: red;">
            <b><i class="material-icons" style="vertical-align: -6px;">error_outline</i>
                (Locking Accounts for this session will disable any future transactions and Accounts updation for this session)</b></span>
            <br>
        <button *ngIf ="!lockAccounts" class="btn btn-{{user.activeSchool.secondaryThemeColor}}" (click)="serviceAdapter.lockAccounts()">Lock Accounts<mat-icon>lock</mat-icon></button>
        <button *ngIf ="lockAccounts" class="btn btn-{{user.activeSchool.secondaryThemeColor}}" (click)="serviceAdapter.unlockAccounts()">Unlock Accounts<mat-icon>lock_open</mat-icon></button>

    </div>
</div>

<ng-container *ngIf="isLoading">
    <app-loading-spinner [user]="user"></app-loading-spinner>
</ng-container>
