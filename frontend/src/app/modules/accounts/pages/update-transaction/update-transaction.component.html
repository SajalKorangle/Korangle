

<div class="card-content table-responsive" *ngIf="!isLoading">
    <div class="row">
        <div class="col-md-9" *ngIf="searchType == searchTypeList[0];">
            <mat-form-field style="width: 50%;">
                <input type="text" matInput (change)="serviceAdapter.findTransactionByVNumber($event)"
                    placeholder="Enter Voucher Number">
            </mat-form-field>
        </div>
        <div class="col-md-9" *ngIf="searchType == searchTypeList[1];">
            <account-search [user]="user"
                            [includeGroup]="false"
                            (onSelection)="serviceAdapter.findTransactionByAccount($event)"></account-search>
        </div>
        <div class="col-md-3">
            <mat-form-field style="width: 100%;">
                <mat-select placeholder="Search By" [ngModel]="searchType"
                    (ngModelChange)="searchType = $event">
                    <mat-option *ngFor="let type of searchTypeList"
                        [value]="type">
                        {{type}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12" *ngIf="transactionsList.length == 0 && isLoadingTransaction == false">
            <span>No Transaction Avaliable</span>
        </div>
        <div class="col-md-12" *ngFor="let transaction of transactionsList">
            <div class="row col-md-12">
                <mat-card style="width: 100%;margin-bottom: 20px; cursor: pointer" (click)="openUpdateTransactionDialog(transaction)">
                    <mat-card-title style="margin-bottom: 15px;">
                        <div class="row">
                            <div class="col-md-2">
                                <span style="font-size: 14px;">Voucher Number: {{transaction.voucherNumber}}</span>
                            </div>
                            <div class="col-md-5">
                                <span *ngIf="transaction.approvalId != null" style="font-size: 14px;">Approval ID: {{transaction.approvalId}} &nbsp;&nbsp;(This Transcation Can Not Be Updated)</span>
                            </div>
                            <div class="col-md-5">
                                <span style="font-size: 14px;float:right;" >Date :{{getDisplayDateFormat(transaction.transactionDate)}}</span>
                            </div>
                        </div>
                    </mat-card-title>
                    <mat-card-content>
                        <div class="row" style="margin-bottom: 15px;">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-3" style="padding-right: 0px;">
                                        <span style="color: rgba(255, 152, 0, 1);">Paid To</span>
                                    </div>
                                    <div class="col-md-9" style="padding: 0px;">
                                        <div *ngFor = "let account of transaction.debitAccounts" style="margin-bottom: 5px; display:inline-block; padding-right: 20px">
                                            <span style="font-size: 14px;">{{account.account}}</span><br><span style="color: rgba(76, 175, 80, 1);font-size: 14px;">{{account.amount}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-3" style="padding-right: 0px;">
                                        <span style="color: rgba(255, 152, 0, 1);">Paid From</span>
                                    </div>
                                    <div class="col-md-9" style="padding: 0px;">
                                        <div *ngFor = "let account of transaction.creditAccounts" style="margin-bottom: 5px; display:inline-block; padding-right: 20px">
                                            <span style="font-size: 14px;">{{account.account}}</span><br><span style="color:rgba(86, 142, 174, 1);font-size: 14px;">{{account.amount}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row col-md-12" style="margin-bottom: 15px;">
                            <span style="color: rgba(255, 152, 0, 1);">Remark: </span>
                            <span style="margin-left: 60px;">{{transaction.remark}}</span>
                        </div>
                        <div class="row" style="margin-bottom: 15px;">
                            <div class="col-md-6">
                                <div class="row col-md-12 custom-font"><span style="color: rgba(255, 152, 0, 1);">Bill :</span></div>

                                <div style="display: inline-block;" *ngFor="let image of transaction.billImages; let i = index">
                                    <img src="{{image.imageURL}}" class="image-column" (click)="openImagePreviewDialog(transaction.billImages, i, 0); $event.stopPropagation()">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="row col-md-12 custom-font"><span style="color: rgba(255, 152, 0, 1);">Quotation :</span></div>

                                <div style="display: inline-block;" *ngFor="let image of transaction.quotationImages; let i = index">
                                    <img src="{{image.imageURL}}" class="image-column" (click)="openImagePreviewDialog(transaction.quotationImages, i, 0)" >
                                </div>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
            </div>
        </div>
    </div>
        
</div>

<ng-container *ngIf="isLoading || isInitialLoading">
    <app-loading-spinner [user]="user"></app-loading-spinner>
</ng-container>
