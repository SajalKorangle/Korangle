

<div class="card-content table-responsive" *ngIf="!isLoading">
    
    <div *ngIf="displayWholeList == true;">
        <div class="row">
            <div class="col-md-9">
                <mat-form-field style="width: 50%;">
                    <input type="text" matInput (input)="handleSearch($event)"
                        placeholder="Enter Account Name">
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <button (click)="openAddAccountDialog()" class="custom-button">Create Account</button>
                <button (click)="openAddGroupDialog()" class="custom-button" style="margin-left: 10px;">Create Group</button>

            </div>
        </div>
        <div *ngIf="searchList.length > 0">
            <div class="row col-md-12">
                <div *ngFor = "let account of searchList">
                    <div class="col-md-3">
                        <mat-card style="margin-bottom:10px;" *ngIf="account.type=='ACCOUNT'">
                            <mat-card-title><span style="cursor: pointer;" (click)="openEditDialog(account)">{{account.title}}</span>
                                <span *ngIf="account.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px">&nbsp;Bal {{account.balance}}</span>
                                <span *ngIf="account.balance >= 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px">&nbsp;Bal {{account.balance}}</span>
                            </mat-card-title>
                        </mat-card>
                        <mat-card *ngIf="account.type == 'GROUP'" style="margin-bottom: 10px">
                            <mat-card-title>
                                <span style="cursor: pointer;" (click)="openEditDialog(account); $event.stopPropagation()">{{account.title}}</span>
                                <i class="material-icons" style="vertical-align: -7px;float:right;cursor: pointer;" (click)="displayWholeGroup(account)">keyboard_arrow_right</i>
                            </mat-card-title>
                        </mat-card>
                    </div>
                </div>
            </div>
            <div class="row col-md-12">
                <div class="col-md-12"  style="border-bottom: 1px solid lightgrey; margin-top: 15px; margin-bottom: 10px;"></div>
            </div>

        </div>
        <div class="row">
            <div class="row col-md-12" style="margin-bottom: 10px;">
                <div class="col-md-12"><span><strong>Expenses</strong></span></div>
            </div>
            <div class="row col-md-12">
                <div *ngFor="let element of expensesList">
                    <div class="col-md-3">
                        <mat-card style="margin-bottom: 10px;">
                            <mat-card-title style="width: 100%;">
                                <span style="cursor: pointer;" (click)="openEditDialog(element)">{{element.title}}</span>
                                <span *ngIf="element.type == 'ACCOUNT' && element.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px">&nbsp;Bal {{element.balance}}</span>
                                <span *ngIf="element.type == 'ACCOUNT' && element.balance >= 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px">&nbsp;Bal {{element.balance}}</span>
                                <hr *ngIf="element.type == 'GROUP'" style="margin-top:4px; margin-bottom: 0px;border: 0.1px solid #E5E5E5;">
                            </mat-card-title>
                            <mat-card-content *ngIf="element.type == 'GROUP'">
                                <div *ngFor="let child of element.childs">
                                    <span *ngIf="child.type == 'ACCOUNT'" style="cursor: pointer;" (click)="openEditDialog(child)">{{child.title}}</span>
                                    <span *ngIf="child.type == 'ACCOUNT' && child.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{child.balance}}</span>
                                    <span *ngIf="child.type == 'ACCOUNT' && child.balance >= 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{child.balance}}</span>
                                    <mat-card *ngIf="child.type == 'GROUP'" style="margin-bottom: 10px;">
                                        <mat-card-title style="width: 100%;">
                                            <span style="cursor: pointer;" (click)="openEditDialog(child)">{{child.title}}</span>
                                            <hr style="margin-top:4px;margin-bottom: 0px;border: 0.1px solid #E5E5E5;">
                                        </mat-card-title>
                                        <mat-card-content>
                                            <div *ngFor="let grandchild of child.childs">
                                                
                                                <span *ngIf="grandchild.type == 'ACCOUNT'" style="cursor: pointer;" (click)="openEditDialog(grandchild)" >{{grandchild.title}}</span>
                                                <span *ngIf="grandchild.type == 'ACCOUNT' && grandchild.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{grandchild.balance}}</span>
                                                <span *ngIf="grandchild.type == 'ACCOUNT' && grandchild.balance >= 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{grandchild.balance}}</span>
                                                <mat-card *ngIf="grandchild.type == 'GROUP'" style="padding: 10px; margin-top: 5px">
                                                    <mat-card-title>
                                                        <span style="cursor: pointer;" (click)="openEditDialog(grandchild); $event.stopPropagation()">{{grandchild.title}}</span>
                                                        <i class="material-icons" style="vertical-align: -7px;float:right;cursor: pointer;" (click)="displayWholeGroup(grandchild)">keyboard_arrow_right</i>
                                                    </mat-card-title>
                                                </mat-card>
                                            </div>
                                        </mat-card-content>
                                    </mat-card>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                </div>

            </div>
            <div class="row col-md-12" >
                <div class="col-md-12"  style="border-bottom: 1px solid lightgrey; margin-top: 15px; margin-bottom: 10px;"></div>
            </div>

        </div>

        <div class="row">
            <div class="row col-md-12" style="margin-bottom: 10px;">
                <div class="col-md-12"><span><strong>Income</strong></span></div>
            </div>
            <div class="row col-md-12">
                <div *ngFor="let element of incomeList">
                    <div class="col-md-3">
                        <mat-card style="margin-bottom: 10px;">
                            <mat-card-title style="width: 100%;">
                                <span style="cursor: pointer;" (click)="openEditDialog(element)">{{element.title}}</span>
                                <span *ngIf="element.type == 'ACCOUNT' && element.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px">&nbsp;Bal {{element.balance}}</span>
                                <span *ngIf="element.type == 'ACCOUNT' && element.balance >= 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px">&nbsp;Bal {{element.balance}}</span>
                                <hr *ngIf="element.type == 'GROUP'" style="margin-top:4px; margin-bottom: 0px;border: 0.1px solid #E5E5E5;">
                            </mat-card-title>
                            <mat-card-content *ngIf="element.type == 'GROUP'">
                                <div *ngFor="let child of element.childs">
                                    <span *ngIf="child.type == 'ACCOUNT'" style="cursor: pointer;" (click)="openEditDialog(child)">{{child.title}}</span>
                                    <span *ngIf="child.type == 'ACCOUNT' && child.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{child.balance}}</span>
                                    <span *ngIf="child.type == 'ACCOUNT' && child.balance > 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{child.balance}}</span>
                                    <mat-card *ngIf="child.type == 'GROUP'" style="margin-bottom: 10px;">
                                        <mat-card-title style="width: 100%;">
                                            <span style="cursor: pointer;" (click)="openEditDialog(child)">{{child.title}}</span>
                                            <hr style="margin-top:4px;margin-bottom: 0px;border: 0.1px solid #E5E5E5;">
                                        </mat-card-title>
                                        <mat-card-content>
                                            <div *ngFor="let grandchild of child.childs">
                                                
                                                <span *ngIf="grandchild.type == 'ACCOUNT'" style="cursor: pointer;" (click)="openEditDialog(grandchild)" >{{grandchild.title}}</span>
                                                <span *ngIf="grandchild.type == 'ACCOUNT' && grandchild.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{grandchild.balance}}</span>
                                                <span *ngIf="grandchild.type == 'ACCOUNT' && grandchild.balance > 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{grandchild.balance}}</span>
                                                <mat-card *ngIf="grandchild.type == 'GROUP'" style="padding: 10px; margin-top: 5px">
                                                    <mat-card-title>
                                                        <span style="cursor: pointer;" (click)="openEditDialog(grandchild); $event.stopPropagation()">{{grandchild.title}}</span>
                                                        <i class="material-icons" style="vertical-align: -7px;float:right;cursor: pointer;" (click)="displayWholeGroup(grandchild)">keyboard_arrow_right</i>
                                                    </mat-card-title>
                                                </mat-card>
                                            </div>
                                        </mat-card-content>
                                    </mat-card>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                </div>

            </div>
            <div class="row col-md-12" >
                <div class="col-md-12"  style="border-bottom: 1px solid lightgrey; margin-top: 15px; margin-bottom: 10px;"></div>
            </div>
        </div>

        <div class="row">
            <div class="row col-md-12" style="margin-bottom: 10px;">
                <div class="col-md-12"><span><strong>Assets</strong></span></div>
            </div>
            <div class="row col-md-12">
                <div *ngFor="let element of assetsList">
                    <div class="col-md-3">
                        <mat-card style="margin-bottom: 10px;">
                            <mat-card-title style="width: 100%;">
                                <span style="cursor: pointer;" (click)="openEditDialog(element)">{{element.title}}</span>
                                <span *ngIf="element.type == 'ACCOUNT' && element.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px">&nbsp;Bal {{element.balance}}</span>
                                <span *ngIf="element.type == 'ACCOUNT' && element.balance >= 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px">&nbsp;Bal {{element.balance}}</span>
                                <hr *ngIf="element.type == 'GROUP'" style="margin-top:4px; margin-bottom: 0px;border: 0.1px solid #E5E5E5;">
                            </mat-card-title>
                            <mat-card-content *ngIf="element.type == 'GROUP'">
                                <div *ngFor="let child of element.childs">
                                    <span *ngIf="child.type == 'ACCOUNT'" style="cursor: pointer;" (click)="openEditDialog(child)">{{child.title}}</span>
                                    <span *ngIf="child.type == 'ACCOUNT' && child.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{child.balance}}</span>
                                    <span *ngIf="child.type == 'ACCOUNT' && child.balance > 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{child.balance}}</span>
                                    <mat-card *ngIf="child.type == 'GROUP'" style="margin-bottom: 10px;">
                                        <mat-card-title style="width: 100%;">
                                            <span style="cursor: pointer;" (click)="openEditDialog(child)">{{child.title}}</span>
                                            <hr style="margin-top:4px;margin-bottom: 0px;border: 0.1px solid #E5E5E5;">
                                        </mat-card-title>
                                        <mat-card-content>
                                            <div *ngFor="let grandchild of child.childs">
                                                
                                                <span *ngIf="grandchild.type == 'ACCOUNT'" style="cursor: pointer;" (click)="openEditDialog(grandchild)" >{{grandchild.title}}</span>
                                                <span *ngIf="grandchild.type == 'ACCOUNT' && grandchild.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{grandchild.balance}}</span>
                                                <span *ngIf="grandchild.type == 'ACCOUNT' && grandchild.balance > 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{grandchild.balance}}</span>
                                                <mat-card *ngIf="grandchild.type == 'GROUP'" style="padding: 10px; margin-top: 5px">
                                                    <mat-card-title>
                                                        <span style="cursor: pointer;" (click)="openEditDialog(grandchild); $event.stopPropagation()">{{grandchild.title}}</span>
                                                        <i class="material-icons" style="vertical-align: -7px;float:right;cursor: pointer;" (click)="displayWholeGroup(grandchild)">keyboard_arrow_right</i>
                                                    </mat-card-title>
                                                </mat-card>
                                            </div>
                                        </mat-card-content>
                                    </mat-card>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                </div>

            </div>
            <div class="row col-md-12" >
                <div class="col-md-12"  style="border-bottom: 1px solid lightgrey; margin-top: 15px; margin-bottom: 10px;"></div>
            </div>
        </div>

        <div class="row">
            <div class="row col-md-12" style="margin-bottom: 10px;">
                <div class="col-md-12"><span><strong>Liabilities</strong></span></div>
            </div>
            <div class="row col-md-12">
                <div *ngFor="let element of liabilityList">
                    <div class="col-md-3">
                        <mat-card style="margin-bottom: 10px;">
                            <mat-card-title style="width: 100%;">
                                <span style="cursor: pointer;" (click)="openEditDialog(element)">{{element.title}}</span>
                                <span *ngIf="element.type == 'ACCOUNT' && element.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px">&nbsp;Bal {{element.balance}}</span>
                                <span *ngIf="element.type == 'ACCOUNT' && element.balance >= 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px">&nbsp;Bal {{element.balance}}</span>
                                <hr *ngIf="element.type == 'GROUP'" style="margin-top:4px; margin-bottom: 0px;border: 0.1px solid #E5E5E5;">
                            </mat-card-title>
                            <mat-card-content *ngIf="element.type == 'GROUP'">
                                <div *ngFor="let child of element.childs">
                                    <span *ngIf="child.type == 'ACCOUNT'" style="cursor: pointer;" (click)="openEditDialog(child)">{{child.title}}</span>
                                    <span *ngIf="child.type == 'ACCOUNT' && child.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{child.balance}}</span>
                                    <span *ngIf="child.type == 'ACCOUNT' && child.balance > 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{child.balance}}</span>
                                    <mat-card *ngIf="child.type == 'GROUP'" style="margin-bottom: 10px;">
                                        <mat-card-title style="width: 100%;">
                                            <span style="cursor: pointer;" (click)="openEditDialog(child)">{{child.title}}</span>
                                            <hr style="margin-top:4px;margin-bottom: 0px;border: 0.1px solid #E5E5E5;">
                                        </mat-card-title>
                                        <mat-card-content>
                                            <div *ngFor="let grandchild of child.childs">
                                                
                                                <span *ngIf="grandchild.type == 'ACCOUNT'" style="cursor: pointer;" (click)="openEditDialog(grandchild)" >{{grandchild.title}}</span>
                                                <span *ngIf="grandchild.type == 'ACCOUNT' && grandchild.balance < 0" style="color:rgba(76, 175, 80, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{grandchild.balance}}</span>
                                                <span *ngIf="grandchild.type == 'ACCOUNT' && grandchild.balance > 0" style="color:rgba(86, 142, 174, 1); font-size:13px; margin-bottom: 10px"><br>Bal {{grandchild.balance}}</span>
                                                <mat-card *ngIf="grandchild.type == 'GROUP'" style="padding: 10px; margin-top: 5px">
                                                    <mat-card-title>
                                                        <span style="cursor: pointer;" (click)="openEditDialog(grandchild); $event.stopPropagation()">{{grandchild.title}}</span>
                                                        <i class="material-icons" style="vertical-align: -7px;float:right;cursor: pointer;" (click)="displayWholeGroup(grandchild)">keyboard_arrow_right</i>
                                                    </mat-card-title>
                                                </mat-card>
                                            </div>
                                        </mat-card-content>
                                    </mat-card>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                </div>

            </div>
            <div class="row col-md-12" >
                <div class="col-md-12"  style="border-bottom: 1px solid lightgrey; margin-top: 15px; margin-bottom: 10px;"></div>
            </div>
        </div>
    </div>
    <div *ngIf="!displayWholeList">
        <div class="row col-md-12">
            <i class="material-icons" style="vertical-align: -7px;cursor:pointer" (click)="displayWholeList = true">keyboard_arrow_left</i><span>Back</span>
                           
        </div>
        <div class="row col-md-12">
            <group-hierarchy [group]="specificGroup"
                            [vm]="this"></group-hierarchy>
        </div>
    </div>

    
</div>

<ng-container *ngIf="isLoading || isInitialLoading">
    <app-loading-spinner [user]="user"></app-loading-spinner>
</ng-container>
