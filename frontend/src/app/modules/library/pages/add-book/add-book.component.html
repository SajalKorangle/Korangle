<div class="card-content">
    <ng-container *ngIf="!isLoading">
        <!-- Top half -->
        <div class="row">
            <!-- Front cover img - if mobile-->
            <div class="col-md-3 visible-sm visible-xs" align="center">
                <img *ngIf="this.frontImage" src="{{ this.frontImage }}" style="width: 50%" />

                <img
                    *ngIf="!this.frontImage"
                    src="https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg"
                    style="width: 50%"
                />

                <br />

                <input type="file" (change)="onImageSelect($event, 'front')" multiple="false" style="display: none" accept="image/*" #imageInputFront />

                <!-- Front image controls - mobile -->
                <div class="d-flex align-items-stretch">
                    <a (click)="imageInputFront.click()" style="cursor: pointer"
                    matTooltip="Accepted image types are jpg, jpeg, and png">Upload front image</a>

                    <a *ngIf="this.frontImage"
                    style="cursor: pointer;" (click)="this.frontImage=''; imageInputFront.value='';"
                    ><mat-icon >delete_forever</mat-icon></a>
                </div>
            </div>

            <!-- Top half form fields -->
            <div class="col-md-9">
                <!-- Top half form fields - row 1 -->
                <div class="row">
                    <!-- Book name -->
                    <div class="col-md-4">
                        <mat-form-field>
                            <mat-label>Book name</mat-label>
                            <input
                            [(ngModel)]="newBook.name"
                            matInput name="name" type="text"
                            [formControl]="bookName" required>
                        </mat-form-field>
                    </div>

                    <!-- Author -->
                    <div class="col-md-4">
                        <mat-form-field>
                            <mat-label>Author</mat-label>
                            <input
                            [(ngModel)]="newBook.author"
                            matInput name="author" type="text">
                        </mat-form-field>
                    </div>

                    <!-- Publisher -->
                    <div class="col-md-4">
                        <mat-form-field>
                            <mat-label>Publisher</mat-label>
                            <input
                            [(ngModel)]="newBook.publisher"
                            matInput name="publisher" type="text">
                        </mat-form-field>
                    </div>
                </div>

                <!-- Top half form fields - row 2 -->
                <div class="row">
                    <!-- Date of purchase -->
                    <div class="col-md-4">
                        <mat-form-field>
                            <mat-label>Date of purchase</mat-label>
                            <input
                            [(ngModel)]="newBook.dateOfPurchase"
                            matInput name="dateOfPurchase" type="date">
                        </mat-form-field>
                    </div>

                    <!-- Book No. -->
                    <div class="col-md-4">
                        <mat-form-field>
                            <mat-label>Book No.</mat-label>
                            <input
                            [(ngModel)]="newBook.bookNumber"
                            matInput name="bookNumber" type="number"
                            [formControl]="bookNumber"
                            required>
                            <mat-error *ngIf="bookNumber.value < 0">Invalid input</mat-error>
                        </mat-form-field>

                    </div>

                    <!-- Edition -->
                    <div class="col-md-4">
                        <mat-form-field>
                            <mat-label>Edition</mat-label>
                            <input
                            [(ngModel)]="newBook.edition"
                            matInput name="edition" type="text">
                        </mat-form-field>
                    </div>
                </div>
            </div>

            <!-- Front cover img - if desktop -->
            <div class="col-md-3 visible-md visible-lg visible-xl" align="center">
                <img *ngIf="this.frontImage" src="{{ this.frontImage }}" style="width: 50%" />

                <img
                    *ngIf="!this.frontImage"
                    src="https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg"
                    style="width: 50%"
                />

                <br />

                <input
                    type="file"
                    (change)="onImageSelect($event, 'front')"
                    multiple="false"
                    style="display: none"
                    accept="image/*"
                    #imageInputFrontTwo
                />

                <!-- Front image controls -->
                <div class="d-flex align-items-stretch">
                    <a (click)="imageInputFrontTwo.click()" style="cursor: pointer" matTooltip="Accepted image types are jpg, jpeg, and png">Upload front image</a>

                    <a *ngIf="this.frontImage"
                    style="cursor: pointer;" (click)="this.frontImage=''; imageInputFrontTwo.value='';"
                    ><mat-icon >delete_forever</mat-icon></a>
                </div>
            </div>
        </div>

        <!-- Bottom half -->
        <div class="row">
            <!-- Back cover img - if mobile-->
            <div class="col-md-3 visible-sm visible-xs" align="center">
                <img *ngIf="this.backImage" src="{{ this.backImage }}" style="width: 50%" />

                <img
                    *ngIf="!this.backImage"
                    src="https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg"
                    style="width: 50%"
                />

                <br />

                <input type="file" (change)="onImageSelect($event, 'back')" multiple="false" style="display: none" accept="image/*" #imageInputBack />

                <!-- Back image controls - mobile -->
                <div class="d-flex align-items-stretch">
                    <a (click)="imageInputBack.click()" style="cursor: pointer" matTooltip="Accepted image types are jpg, jpeg, and png">Upload back image</a>

                    <a *ngIf="this.backImage"
                    style="cursor: pointer;" (click)="this.backImage=''; imageInputBack.value='';"
                    ><mat-icon >delete_forever</mat-icon></a>
                </div>
            </div>

            <!-- Bottom half form fields -->
            <div class="col-md-9">
                <!-- Bottom half form fields - row 1 -->
                <div class="row">
                    <!-- NO. of pages-->
                    <div class="col-md-4">
                        <mat-form-field>
                            <mat-label>No. of pages</mat-label>
                            <input
                            [(ngModel)]="newBook.numberOfPages"
                            matInput name="numberOfPages" type="number"
                            [formControl]="numberOfPages">
                            <mat-error *ngIf="numberOfPages.value < 0">Invalid input</mat-error>
                        </mat-form-field>
                    </div>
    
                    <!-- Printed cost -->
                    <div class="col-md-4">
                        <mat-form-field>
                            <mat-label>Printed cost</mat-label>
                            <input
                            [(ngModel)]="newBook.printedCost"
                            matInput name="printedCost" type="number"
                            [formControl]="printedCost"
                            >
                            <mat-error *ngIf="printedCost.invalid">Invalid input</mat-error>
                        </mat-form-field>
                    </div>
    
                    <!-- Cover type -->
                    <div class="col-md-4">
                        <mat-form-field>
                            <mat-label>Cover type</mat-label>
                            <input
                            [(ngModel)]="newBook.coverType"
                            matInput name="coverType" type="text">
                        </mat-form-field>
                    </div>
                </div>

                <!-- Bottom half form fields - row 2 -->
                <div class="row">
                    <!-- Type of book-->
                    <div class="col-md-4">
                        <mat-form-field>
                            <mat-label>Type of book</mat-label>
                            <input
                            [(ngModel)]="newBook.bookType"
                            matInput name="bookType" type="text">
                        </mat-form-field>
                    </div>

                    <!-- Location -->
                    <div class="col-md-4">
                        <mat-form-field>
                            <mat-label>Location</mat-label>
                            <input
                            [(ngModel)]="newBook.location"
                            matInput name="location" type="text">
                        </mat-form-field>
                    </div>

                </div>
            </div>

            <!-- Back cover img - if desktop -->
            <div class="col-md-3 visible-md visible-lg visible-xl" align="center">
                <img *ngIf="this.backImage" src="{{ this.backImage }}" style="width: 50%" />

                <img
                    *ngIf="!this.backImage"
                    src="https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg"
                    style="width: 50%"
                />

                <br />

                <input
                    type="file"
                    (change)="onImageSelect($event,  'back')"
                    multiple="false"
                    style="display: none"
                    accept="image/*"
                    #imageInputBackTwo
                />

                <!-- Back image controls -->
                <div class="d-flex align-items-stretch">
                    <a (click)="imageInputBackTwo.click()" style="cursor: pointer" matTooltip="Accepted image types are jpg, jpeg, and png">Upload back image</a>

                    <a *ngIf="this.backImage"
                    style="cursor: pointer;"
                    (click)="this.backImage=''; imageInputBackTwo.value='';"
                    ><mat-icon >delete_forever</mat-icon></a>
                </div>
            </div>
        </div>
        <button
            *ngIf="!isMobile()"
            type="submit"
            id="action-add-book"
            class="btn btn-{{ user.activeSchool.secondaryThemeColor }}"
            (click)="serviceAdapter.createNewBook()"
        >
        Add
        </button>
        <button
            [ngClass]="'sticky mobileButton-' + user.activeSchool.secondaryThemeColor"
            *ngIf="isMobile()"
            mat-fab
            color="primary"
            (click)="serviceAdapter.createNewBook()"
        >
            <mat-icon>check</mat-icon>
        </button>
    </ng-container>
</div>

<ng-container *ngIf="isLoading">
    <app-loading-spinner [user]="user"></app-loading-spinner>
</ng-container>
