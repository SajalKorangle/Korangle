<div class="logo">
    <span style="margin-left: 10px;">Hi {{user.username}}!</span>
    <a style="float: right; cursor: pointer;"
       *ngIf="!user.activeModule"
       (click)="logout()">Logout</a>
    <br/>
    <a class="simple-text" disabled="true" *ngIf="user.schoolList.length > 0">
        <div class="logo-img" *ngIf="user.activeSchool">
            <img src="{{user.activeSchool.logo}}" style="border-radius: 2px;"/>
        </div>

        <ng-container *ngIf="user.schoolList.length>1">
            <select [(ngModel)]="user.activeSchool"
                    (ngModelChange)="handleSchoolChange()"
                    style="padding: 0px; border: none; background-color: transparent;">
                <option *ngFor="let school of user.schoolList;"
                        [ngValue]="school">
                    {{school.name}}
                </option>
            </select>
        </ng-container>

        <ng-container *ngIf="user.schoolList.length===1">
            {{user.activeSchool.name}}
        </ng-container>

        <br/>

        <span [class.sessionMargin68]="user.schoolList.length>1"
              [class.sessionMargin60]="user.schoolList.length==1">
            <span *ngIf="user.activeSchool.currentSessionDbId==1">2017-18</span>
            <span *ngIf="user.activeSchool.currentSessionDbId==2">2018-19</span>
        </span>

    </a>
</div>

<div class="sidebar-wrapper">

    <div class="nav-container">

        <ul class="nav" *ngIf="user.activeModule">

            <ng-container *ngFor="let module of user.activeSchool.moduleList">
                <li [class.active]="module.dbId === user.activeModule.dbId"
                    [attr.data-color]='user.activeSchool.primaryThemeColor'
                    style="border-bottom: 0.1px solid lightgrey;">
                    <a (click)="module.showTaskList = !module.showTaskList;">
                        <i class="material-icons">{{module.icon}}</i>
                        <p>
                            {{module.title}}
                            <i *ngIf="!module.showTaskList" class="material-icons" style="float: right;">keyboard_arrow_down</i>
                            <i *ngIf="module.showTaskList" class="material-icons" style="float: right;">keyboard_arrow_up</i>
                        </p>
                    </a>
                    <ng-container *ngIf="module.showTaskList">
                        <div *ngFor="let task of module.taskList"
                             [attr.data-color]="user.activeSchool.secondaryThemeColor"
                             [class.active]="task.dbId===user.activeTask.dbId"
                             class="subsectionDiv"
                             (click)="activateTask(task, module);">
                            <i class="material-icons">remove</i>
                            <p>{{task.title}}</p>
                        </div>
                    </ng-container>
                </li>
            </ng-container>

            <li style="margin-bottom: 80px;">
                <a (click)="logout()">
                    <i class="material-icons">exit_to_app</i>
                    <p>Log out</p>
                </a>
            </li>

        </ul>

    </div>

</div>