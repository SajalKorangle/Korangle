<div class="wrapper hidePrint">

    <div *ngIf="user.isAuthenticated" class="pageDiv">

        <div class="sidebar" data-image="" style="position: fixed">
            <app-sidebar [user]="user"></app-sidebar>
            <div class="sidebar-background" style="background-image: url(../assets/img/sidebar-4.jpg)"></div>
        </div>

        <mat-progress-bar *ngIf="user.isLazyLoading"  mode="indeterminate"></mat-progress-bar>

        <div class="main-panel">

            <app-navbar *ngIf="user.activeSchool" [user]="user" class="visible-sm visible-xs"></app-navbar>

            <div class="main-content">
                <div class="container-fluid">

                    <div class="card"
                         *ngIf="user.section"
                         style="min-height: 100%">
                        <div class="card-header hidden-xs hidden-sm" [attr.data-background-color]="user.activeSchool.primaryThemeColor">
                            <div class="card-header-part1 hidden-xs">
                                <h4 class="title">{{user.section.title}} - {{user.section.subTitle}}</h4>
                                <div style="display: flex">
                                    <span style="margin-right: 15px; margin-top: 2px;font-size: 18.2px" *ngIf="lastMonthIsGoingOn()">
                                        Valid till &nbsp;{{user.activeSchool.dateOfExpiration | date}}&nbsp;
                                        <span *ngIf="countDownForValidity >= 0">
                                            <b> (&nbsp;{{countDownForValidity}}&nbsp; days left !&nbsp;)</b>
                                        </span></span>
                                    <a style="text-decoration: none" (click)="refresh()">
                                        <i class="material-icons">refresh</i>
                                    </a>
                                </div>
                            </div>
                            <h4 class="title visible-xs">{{user.section.title}}</h4>
                        </div>
                        <router-outlet></router-outlet>
                    </div>

                    <ng-container *ngIf="user.username && !user.activeSchool">
                        You are not attached to any of the schools yet!
                    </ng-container>

                    <!-- ng-container *ngIf="user.isPageLoading">
                        <app-loading-spinner [user]="user"></app-loading-spinner>
                    </ng-container -->

                </div>
            </div>

            <!--Loading-->
            <ng-container *ngIf="isLoading">
                <app-loading-spinner [user]="user"></app-loading-spinner>
            </ng-container>


        </div>

    </div>

    <div *ngIf="!user.isAuthenticated" style="min-height: 100%;">
        <app-login-form [user]="user"></app-login-form>
    </div>

</div>
<!-- app-new-fee-receipt-modal [user]="user"></app-new-fee-receipt-modal -->
<div class="wrapper showPrint">
    <app-print [user]="user"></app-print>
</div>

