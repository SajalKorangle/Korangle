<ng-container *ngIf="studentFinalReportList">

    <ng-container *ngFor="let student of studentFinalReportList; let isLast = last;">

        <div class="container-fluid" [class.pageBreakAfter]="!isLast"
             style="width: 100%; height: 100%;
             border: 6px double #b87333;
             position: relative;
             overflow: hidden;
             border-radius: 8px;
             font-weight: 800 !important;">

            <!-- Reg. No. , Dise Code -->
            <div class="row no-gutters" style="margin-bottom: 0px !important;">
                <div class="col-xs-6 d-flex custom-padding">
                    Dise code : {{user.activeSchool.diseCode}}
                </div>
                <div class="col-xs-6 d-flex custom-padding" align="end">
                    Reg. No. : {{user.activeSchool.registrationNumber}}
                </div>
            </div>

            <!-- Background Watermark -->
            <img src="{{user.activeSchool.profileImage}}"
                 style="border-radius: 2px; position: absolute;
                 top: 440px; left: 178px;
                 width: 350px; height: 350px;
                 opacity: 0.1;
                 filter: grayscale(100%);
                 z-index: 10;"/>

            <!-- School Name -->
            <svg viewBox="0 0 500 115" style="padding-top: 0px; margin-top: 0px !important;">
                <path id="curve" d="M43.2,125c4-6.1,70.5-96.8,193.6-95.6c136.3,1.2,205.8,85.3,220.1,97" />
                <text>
                    <textPath xlink:href="#curve" startOffset="50%" text-anchor="middle" fill="red">
                        {{user.activeSchool.printName}}
                    </textPath>
                </text>
                <!-- image xlink:href="http://localhost:4200/assets/img/angular2-logo.png"
                       x="210" y="45" width="80" height="80"/ -->
            </svg>

            <!-- School Logo -->
            <img src="{{user.activeSchool.profileImage}}"
                 style="border-radius: 2px;
                        position: absolute; top: 90px; left: 316px;
                        opacity: 0.8;
                        width: 80px; height: 80px;"/>

            <!-- Address -->
            <div class="row no-gutters">
                <div class="col-xs-12 d-flex justify-content-center custom-padding" align="center">
                    <span style="font-size: 18px;">
                        {{user.activeSchool.address}}
                    </span>
                </div>
            </div>

            <!-- Progress Report, Class, Session -->
            <div class="row no-gutters" style="margin-top: 10px">
                <div class="col-xs-12 d-flex justify-content-center custom-padding" align="center">
                    <span style="font-size: 30px;">Annual Report</span><br/>
                    <div style="height: 5px"></div>
                    <span style="font-size: 20px">{{getSessionName(user.activeSchool.currentSessionDbId)}}</span>
                    <div style="height: 5px"></div>
                    <span style="font-size: 25px;">{{student.className}}</span><br/>
                </div>
            </div>

            <!-- Roll No. , Scholar No. -->
            <div class="row no-gutters">
                <div class="col-xs-3 studentInfo">
                    Roll No.<span style="float: right">:</span>
                </div>
                <div class="col-xs-5 studentInfo" style="padding-left: 0px !important;">
                    {{student.rollNumber}}
                </div>
                <div class="col-xs-2 studentInfo" style="padding-left: 0px !important;">
                    Scholar No.<span style="float: right">:</span>
                </div>
                <div class="col-xs-2 studentInfo" style="padding-left: 0px !important;">
                    {{student.scholarNumber}}
                </div>
            </div>

            <!-- Student's Name , Aadhar No. -->
            <div class="row no-gutters">
                <div class="col-xs-3 studentInfo">
                    Student's Name<span style="float: right">:</span>
                </div>
                <div class="col-xs-9 studentInfo" style="padding-left: 0px !important; font-size: 25px !important;">
                    <span *ngIf="student.gender=='Male'">Master</span>
                        <span *ngIf="student.gender=='Female'">Miss</span>
                        {{ student.name | titlecase }}
                </div>
            </div>

            <!-- Father's Name , Category -->
            <div class="row no-gutters">
                <div class="col-xs-3 studentInfo">
                    Father's Name<span style="float: right">:</span>
                </div>
                <div class="col-xs-5 studentInfo" style="padding-left: 0px !important;">
                    Mr. {{ student.fathersName | titlecase }}
                </div>
                <div class="col-xs-2 studentInfo" style="padding-left: 0px !important;">
                    Category<span style="float: right">:</span>
                </div>
                <div class="col-xs-2 studentInfo" style="padding-left: 0px !important;">
                    {{student.category}}
                </div>
            </div>

            <!-- Mother's Name , SSSMID -->
            <div class="row no-gutters">
                <div class="col-xs-3 studentInfo" style="background-color: blue !important;">
                    Mother's Name<span style="float: right">:</span>
                </div>
                <div class="col-xs-5 studentInfo" style="padding-left: 0px !important; background-color: yellow !important;">
                    Mrs. {{ student.motherName | titlecase }}
                </div>
                <div class="col-xs-2 studentInfo" style="padding-left: 0px !important; background-color: blue !important;">
                    SSSMID<span style="float: right">:</span>
                </div>
                <div class="col-xs-2 studentInfo" style="padding-left: 0px !important; background-color: yellow !important;">
                    {{student.childSSMID}}
                </div>
            </div>

            <!-- Aadhar No. , Family SSMID -->
            <div class="row no-gutters">
                <div class="col-xs-3 studentInfo" style="background-color: blue !important;">
                    Aadhar No.<span style="float: right">:</span>
                </div>
                <div class="col-xs-5 studentInfo" style="padding-left: 0px !important; background-color: yellow !important;">
                    {{student.aadharNum}}
                </div>
                <div class="col-xs-2 studentInfo" style="padding-left: 0px !important; background-color: blue !important;">
                    Family Id<span style="float: right">:</span>
                </div>
                <div class="col-xs-2 studentInfo" style="padding-left: 0px !important; background-color: yellow !important;">
                    {{student.familySSMID}}
                </div>
            </div>

            <!-- Date of Birth -->
            <div class="row no-gutters">
                <div class="col-xs-3 studentInfo">
                    Date of birth<span style="float: right">:</span>
                </div>
                <div class="col-xs-9 studentInfo" style="padding-left: 0px !important;">
                    {{student.dateOfBirth | date: 'dd/MM/yyyy'}} ({{student.dateOfBirth | dateInWords}})
                </div>
            </div>

            <!-- Marksheet -->
            <div class="row no-gutters">
                <div class="col-xs-12">
                    <table class="table updownBorder" style="font-size: 16px !important;">
                        <tbody>
                        <tr>
                            <td class="upBorder leftBorder downBorder bold" style="padding: 5px" align="left"><b>Subject</b></td>
                            <td class="upBorder downBorder bold" align="right"><b>Max. Marks</b></td>
                            <td class="upBorder downBorder bold" align="right"><b>Marks Obt.</b></td>
                            <td class="upBorder rightBorder downBorder bold" align="center"><b>Grade</b></td>
                        </tr>
                        <ng-container *ngFor="let subject of student.mainSubjectList; let i = index;">
                            <tr>
                                <td class="leftBorder" style="padding: 5px;">{{getSubjectName(subject.parentSubject)}}</td>
                                <td style="padding: 5px; padding-right: 30px;" align="right">{{getOverallStudentSubjectMaxMarks()}}</td>
                                <td style="padding: 5px; padding-right: 30px;" align="right">{{getOverallStudentSubjectMarks(student, subject, i) | number: '1.0-1'}}</td>
                                <td class="rightBorder" style="padding: 5px;" align="center">{{getGrade(getOverallStudentSubjectMarks(student, subject, i),getOverallStudentSubjectMaxMarks())}}</td>
                            </tr>
                        </ng-container>
                        <tr>
                            <td class="leftBorder" style="padding: 5px;">{{extraFieldList[0].name}}</td>
                            <td style="padding: 5px; padding-right: 30px;" align="right">{{getOverallStudentTotalExtraFieldMaxMarks(0)}}</td>
                            <td style="padding: 5px; padding-right: 30px;" align="right">{{getOverallStudentTotalExtraFieldMarks(student, 0) | number: '1.0-1'}}</td>
                            <td class="rightBorder" style="padding: 5px;" align="center">{{getGrade(getOverallStudentTotalExtraFieldMarks(student, 0),getOverallStudentTotalExtraFieldMaxMarks(0))}}</td>
                        </tr>
                        <tr>
                            <td class="leftBorder" style="padding: 5px;">{{extraFieldList[1].name}}</td>
                            <td style="padding: 5px; padding-right: 30px;" align="right">{{getOverallStudentTotalExtraFieldMaxMarks(1)}}</td>
                            <td style="padding: 5px; padding-right: 30px;" align="right">{{getOverallStudentTotalExtraFieldMarks(student, 1) | number: '1.0-1'}}</td>
                            <td class="rightBorder" style="padding: 5px;" align="center">{{getGrade(getOverallStudentTotalExtraFieldMarks(student, 1),getOverallStudentTotalExtraFieldMaxMarks(1))}}</td>
                        </tr>
                        <tr>
                            <td class="updownBorder leftBorder bold" style="padding: 5px;">Total</td>
                            <td class="updownBorder bold" style="padding: 5px; padding-right: 30px;" align="right">{{getOverallStudentMaxMarks(student)}}</td>
                            <td class="updownBorder bold" style="padding: 5px; padding-right: 30px;" align="right">{{getOverallStudentMarks(student)}}</td>
                            <td class="updownBorder rightBorder bold" style="padding: 5px;" align="center">{{getGrade(getOverallStudentMarks(student),getOverallStudentMaxMarks(student))}}</td>
                        </tr>
                        <tr>
                            <td class="bold rightBorder leftBorder"
                                colspan="4"
                                style="padding: 5px;">
                                Total Marks In Words: - {{ getOverallStudentMarks(student) | amountInWords }}
                            </td>
                        </tr>
                        <ng-container *ngFor="let subject of student.extraSubjectList; let i = index;">
                            <tr>
                                <td [class.upBorder]="i==0" class="leftBorder" style="padding: 5px;">{{getSubjectName(subject.parentSubject)}}</td>
                                <td [class.upBorder]="i==0" style="padding: 5px; padding-right: 30px;" align="right">{{getOverallStudentSubjectMaxMarks()}}</td>
                                <td [class.upBorder]="i==0" style="padding: 5px; padding-right: 30px;" align="right">{{getOverallStudentSubjectMarks(student, subject, i) | number: '1.0-1'}}</td>
                                <td [class.upBorder]="i==0" class="rightBorder" style="padding: 5px;" align="center">{{getGrade(getOverallStudentSubjectMarks(student, subject, i),getOverallStudentSubjectMaxMarks())}}</td>
                            </tr>
                        </ng-container>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Percentage, Attendance -->
            <div class="row no-gutters" style="font-size: 16px !important;">
                <div class="col-xs-6 d-flex custom-padding">
                    Attendance:
                    <ng-container *ngIf="reportCardMapping.autoAttendance">
                        {{getOverallStudentAttendance(student)}} / {{getOverallStudentWorkingDays(student)}}
                    </ng-container>
                </div>
                <div class="col-xs-6 custom-padding"  align="end">
                    Percentage - {{getPercentage(getOverallStudentMarks(student),getOverallStudentMaxMarks(student)) | number: '1.0-1'}}%
                </div>
            </div>

            <!-- Promotion Info -->
            <div class="row no-gutters" style="font-size: 16px !important;">
                <div class="col-xs-12 d-flex custom-padding" align="center">
                    {{getNextStep(student)}}
                </div>
            </div>

            <!-- Class Teacher's Sign. , Headmaster's Sign. -->
            <div class="row no-gutters"
                 style="position: absolute; bottom: 25px; width: 100%;">
                <div class="col-xs-6 custom-padding" style="padding-left: 30px">
                    Class Teacher's Signature
                </div>
                <div class="col-xs-6 custom-padding" style="padding-right: 40px" align="end">
                    Principal's Signature
                </div>
            </div>

        </div>

    </ng-container>

</ng-container>


