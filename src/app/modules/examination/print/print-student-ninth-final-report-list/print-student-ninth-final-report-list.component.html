<ng-container *ngIf="studentFinalReportList">

    <ng-container *ngFor="let student of studentFinalReportList; let isLast = last;">

        <div class="container-fluid" [class.pageBreakAfter]="!isLast"
             style="width: 100%; height: 100%;
             border: 6px double #b87333;
             position: relative;
             overflow: hidden;
             border-radius: 8px;
             font-weight: 800 !important;">

            <!-- Background Watermark -->
            <img src="{{user.activeSchool.profileImage}}"
                 style="border-radius: 2px; position: absolute;
                 top: 440px; left: 178px;
                 width: 350px; height: 350px;
                 opacity: 0.15 !important;
                 filter: grayscale(100%) !important;
                 z-index: 10;"/>

            <!-- School Logo -->
            <img src="{{user.activeSchool.profileImage}}"
                 style="border-radius: 2px;
                        position: absolute; top: 115px; left: 30px;
                        opacity: 0.8;
                        width: 100px; height: 100px;"/>

            <!-- Student Photo -->
            <img src="{{student.profileImage}}"
                 style="border: 1px solid black;
                             border-radius: 10px;
                             position: absolute; top: 115px; left: 580px;
                             width: 100px; height: 100px;"/>

            <!-- Reg. No. , Dise Code -->
            <div class="row no-gutters" style="margin-bottom: 0px !important;">
                <div class="col-xs-6 d-flex custom-padding">
                    Dise code : {{user.activeSchool.diseCode}}
                </div>
                <div class="col-xs-6 d-flex custom-padding" align="end">
                    Reg. No. : {{user.activeSchool.registrationNumber}}
                </div>
            </div>

            <!-- School Name -->
            <div class="row no-gutters" style="margin-top: 25px;">
                <div class="col-xs-12 " align="center">
                    <span style="font-size: 45px; font-weight: 800; color: red !important;">
                        {{user.activeSchool.printName}}
                    </span>
                </div>
            </div>

            <!-- Address -->
            <div class="row no-gutters" style="margin-top: 5px !important; line-height: normal !important;">
                <div class="col-xs-12" align="center">
                    <span style="font-size: 22px;">
                        {{user.activeSchool.address}}
                    </span>
                </div>
            </div>

            <!-- Annual Report, Class, Session -->
            <div class="row no-gutters" style="margin-top: 3px !important; line-height: normal !important;">
                <div class="col-xs-12" align="center">
                    <span style="font-size: 35px;">Annual Report</span>
                </div>
            </div>

            <!-- Session -->
            <div class="row no-gutters" style="margin-top: 3px !important; line-height: normal !important;">
                <div class="col-xs-12" align="center">
                    <span style="font-size: 25px">{{getSessionName(user.activeSchool.currentSessionDbId)}}</span>
                </div>
            </div>

            <!-- Class -->
            <div class="row no-gutters" style="margin-top: 3px !important; line-height: normal !important;">
                <div class="col-xs-12" align="center">
                    <span style="font-size: 30px;">{{student.className}}</span>
                </div>
            </div>

            <!-- Roll No. , Scholar No. -->
            <div class="row no-gutters" style="margin-top: 15px !important; margin-bottom: 5px !important;">
                <div class="col-xs-3 studentInfo" style="font-weight: normal !important;">
                    Roll No.<span style="float: right">:</span>
                </div>
                <div class="col-xs-4 studentInfo" style="padding-left: 0px !important;">
                    {{student.rollNumber}}
                </div>
                <div class="col-xs-3 studentInfo" style="padding-left: 0px !important;font-weight: normal !important;">
                    Scholar No.<span style="float: right">:</span>
                </div>
                <div class="col-xs-2 studentInfo" style="padding-left: 0px !important;">
                    {{student.scholarNumber}}
                </div>
            </div>

            <!-- Student's Name -->
            <div class="row no-gutters" style="margin-bottom: 5px !important;">
                <div class="col-xs-3 studentInfo" style="font-weight: normal !important;">
                    Student's Name<span style="float: right">:</span>
                </div>
                <div class="col-xs-9 studentInfo" style="padding-left: 0px !important; font-size: 25px !important;">
                    <span *ngIf="student.gender=='Male'">Master</span>
                    <span *ngIf="student.gender=='Female'">Miss</span>
                    {{ student.name | titlecase }}
                </div>
            </div>

            <!-- Father's Name , Category -->
            <div class="row no-gutters" style="margin-bottom: 5px !important;">
                <div class="col-xs-3 studentInfo" style="font-weight: normal !important;">
                    Father's Name<span style="float: right">:</span>
                </div>
                <div class="col-xs-9 studentInfo" style="padding-left: 0px !important;">
                    Mr. {{ student.fathersName | titlecase }}
                </div>
            </div>

            <!-- Mother's Name , SSSMID -->
            <div class="row no-gutters" style="margin-bottom: 5px !important;">
                <div class="col-xs-3 studentInfo" style="font-weight: normal !important;">
                    Mother's Name<span style="float: right">:</span>
                </div>
                <div class="col-xs-9 studentInfo" style="padding-left: 0px !important;">
                    Mrs. {{ student.motherName | titlecase }}
                </div>
            </div>

            <!-- Date of Birth -->
            <div class="row no-gutters" style="margin-bottom: 5px !important;">
                <div class="col-xs-3 studentInfo" style="font-weight: normal !important;">
                    Date of birth<span style="float: right">:</span>
                </div>
                <div class="col-xs-9 studentInfo" style="padding-left: 0px !important;">
                    {{student.dateOfBirth | date: 'dd/MM/yyyy'}} ({{student.dateOfBirth | dateInWords}})
                </div>
            </div>

            <!-- Aadhar No. , Category -->
            <div class="row no-gutters" style="margin-bottom: 5px !important;">
                <div class="col-xs-3 studentInfo" style="font-weight: normal !important;">
                    Aadhar No.<span style="float: right">:</span>
                </div>
                <div class="col-xs-4 studentInfo" style="padding-left: 0px !important;">
                    {{student.aadharNum}}
                </div>
                <div class="col-xs-3 studentInfo" style="padding-left: 0px !important;font-weight: normal !important;">
                    Category<span style="float: right">:</span>
                </div>
                <div class="col-xs-2 studentInfo" style="padding-left: 0px !important;">
                    {{student.category}}
                </div>
            </div>

            <!-- Child SSMID , Family SSMID -->
            <div class="row no-gutters" style="margin-bottom: 5px !important;">
                <div class="col-xs-3 studentInfo" style="font-weight: normal !important;">
                    Child SSMID<span style="float: right">:</span>
                </div>
                <div class="col-xs-4 studentInfo" style="padding-left: 0px !important;">
                    {{student.childSSMID}}
                </div>
                <div class="col-xs-3 studentInfo" style="padding-left: 0px !important;font-weight: normal !important;">
                    Family SSMID<span style="float: right">:</span>
                </div>
                <div class="col-xs-2 studentInfo" style="padding-left: 0px !important;">
                    {{student.familySSMID}}
                </div>
            </div>

            <!-- Marksheet -->
            <div class="row no-gutters" style="margin-top: 25px !important;">
                <div class="col-xs-12">
                    <table class="table updownBorder" style="font-size: 10px !important;">
                        <tbody>
                        <tr>
                            <td class="upBorder leftBorder downBorder bold"
                                rowspan="3"
                                align="left"><b>Subject</b></td>
                            <td class="upBorder downBorder bold"
                                rowspan="3"
                                align="center"><b>Quarterly</b></td>
                            <td class="upBorder downBorder bold"
                                rowspan="3"
                                align="center"><b>Half<br/>Yearly</b></td>
                            <td class="upBorder downBorder bold"
                                colspan="3"
                                align="center"><b>Yearly</b></td>
                            <td class="upBorder rightBorder downBorder bold"
                                colspan="7"
                                align="center"><b>Final (Marks Obtained/Weightage)</b></td>
                        </tr>
                        <tr>
                            <td class="upBorder leftBorder downBorder bold"
                                rowspan="2"
                                align="left"><b>Theory</b></td>
                            <td class="upBorder downBorder bold"
                                rowspan="2"
                                align="center"><b>Practical</b></td>
                            <td class="upBorder downBorder bold"
                                rowspan="2"
                                align="center"><b>Total</b></td>
                            <td class="upBorder downBorder bold"
                                rowspan="2"
                                align="center"><b>Quarterly</b></td>
                            <td class="upBorder downBorder bold"
                                rowspan="2"
                                align="center"><b>Half<br/>Yearly</b></td>
                            <td class="upBorder downBorder bold"
                                colspan="3"
                                align="center"><b>Yearly</b></td>
                            <td class="upBorder downBorder bold"
                                rowspan="2"
                                align="center"><b>Total</b></td>
                            <td class="upBorder rightBorder downBorder bold"
                                rowspan="3"
                                align="center"><b>Result</b></td>
                        </tr>
                        <tr>
                            <td class="upBorder leftBorder downBorder bold"
                                align="left"><b>Theory</b></td>
                            <td class="upBorder downBorder bold"
                                align="center"><b>Practical</b></td>
                            <td class="upBorder downBorder bold"
                                align="center"><b>Total</b></td>
                        </tr>
                        <tr>
                            <td class="upBorder leftBorder downBorder bold"
                                align="left"><b>Max./Min. Marks</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right"><b>100</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right"><b>100</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right"><b>75</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right"><b>25</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right"><b>100</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right"><b>5</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right"><b>5</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right"><b>60</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right"><b>10/3.3</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right"><b>70</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right"><b>80/26.4</b></td>
                        </tr>
                        <ng-container *ngFor="let subject of student.subjectList; let i = index;">
                            <tr>
                                <td class="leftBorder">{{getSubjectName(subject.parentSubject)}}</td>
                                <td align="right" class="leftBorder numberRightPadding">{{getQuarterlyMarks(student, subject.parentSubject, 100)}}</td>
                                <td align="right" class="leftBorder numberRightPadding">{{getHalfYearlyMarks(student, subject.parentSubject, 100)}}</td>
                                <td align="right" class="leftBorder numberRightPadding">
                                    <ng-container *ngIf="isPractical(student, subject.parentSubject)">{{getFinalTheoryMarks(student, subject.parentSubject, 75)}}</ng-container>
                                </td>
                                <td align="right" class="leftBorder numberRightPadding">
                                    <ng-container *ngIf="isPractical(student, subject.parentSubject)">{{getFinalPracticalMarks(student, subject.parentSubject, 25)}}</ng-container>
                                </td>
                                <td align="right" class="leftBorder numberRightPadding">{{getFinalMarks(student, subject.parentSubject, 100)}}</td>
                                <td align="right" class="leftBorder numberRightPadding">{{getQuarterlyMarks(student, subject.parentSubject, 5)}}</td>
                                <td align="right" class="leftBorder numberRightPadding">{{getHalfYearlyMarks(student, subject.parentSubject, 5)}}</td>
                                <td align="right" class="leftBorder numberRightPadding">
                                    <ng-container *ngIf="isPractical(student, subject.parentSubject)">{{getFinalTheoryMarks(student, subject.parentSubject, 60)}}</ng-container>
                                </td>
                                <td align="right" class="leftBorder numberRightPadding">
                                    <ng-container *ngIf="isPractical(student, subject.parentSubject)">{{getFinalPracticalMarks(student, subject.parentSubject, 10)}}</ng-container>
                                </td>
                                <td align="right" class="leftBorder numberRightPadding">{{getFinalMarks(student, subject.parentSubject, 70)}}</td>
                                <td align="right" class="leftBorder numberRightPadding">{{getTotalSubjectMarks(student, subject.parentSubject) | number: '1.1-1'}}</td>
                                <td align="center" class="leftBorder">{{getSubjectResult(student, subject.parentSubject)}}</td>
                            </tr>
                        </ng-container>
                        <tr>
                            <td class="upBorder downBorder bold"
                                colspan="10"
                                align="left"><b>Total (Best Five subjects)</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right">400</td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right">{{getTotalBestFiveMarks(student) | number: '1.1-1'}}</td>
                            <td class="upBorder rightBorder downBorder bold"
                                align="right"></td>
                        </tr>
                        <tr>
                            <td class="upBorder downBorder bold"
                                colspan="10"
                                align="left"><b>C.C.E.</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right">100</td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right">{{student.cceMarks | number: '1.1-1'}}</td>
                            <td class="upBorder rightBorder downBorder bold"
                                align="right"></td>
                        </tr>
                        <tr>
                            <td class="upBorder downBorder bold"
                                colspan="10"
                                align="left"><b>Grand Total</b></td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right">500</td>
                            <td class="upBorder downBorder bold numberRightPadding"
                                align="right">{{getTotalBestFiveMarks(student)+student.cceMarks | number: '1.1-1'}}</td>
                            <td class="upBorder rightBorder downBorder bold"
                                align="center">{{getOverallResult(student)}}</td>
                        </tr>
                        <tr>
                            <td class="upBorder downBorder bold"
                                colspan="13"
                                align="left"><b>Grand Total in words: {{getTotalBestFiveMarks(student)+student.cceMarks | amountInWords}}</b></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Division, Percentage -->
            <div class="row no-gutters" style="font-size: 16px !important;">
                <div class="col-xs-6 d-flex custom-padding">
                    Result:
                    <ng-container *ngIf="reportCardMapping.autoAttendance">
                        {{getDivision(student)}}
                    </ng-container>
                </div>
                <div class="col-xs-6 custom-padding"  align="end">
                    Percentage - {{getPercentage(student) | number: '1.0-1'}}%
                </div>
            </div>

            <!-- Teacher's Remarks -->
            <div class="row no-gutters" style="font-size: 16px !important; margin-top: 20px !important; margin-bottom: 30px !important;">
                <div class="col-xs-12 d-flex custom-padding">
                    Teacher's Remarks:
                </div>
            </div>

            <!-- Promotion Info -->
            <!-- div class="row no-gutters" style="font-size: 20px !important;">
                <div class="col-xs-12 d-flex custom-padding" align="center">
                    {{getNextStep(student)}}
                </div>
            </div -->

            <!-- Principal Signature Image -->
            <img src="{{user.activeSchool.principalSignatureImage}}"
                 *ngIf="user.activeSchool.principalSignatureImage != null && showPrincipalSignature"
                 style="position: absolute;
                 bottom: 25px; left: 525px;
                 width: 150px; height: 75px;
                 z-index: 1;"/>
            <!-- img src="https://s3.amazonaws.com/korangleplus/schools/13/principal_signature/1551291073.55681"
                 style="position: absolute;
                 bottom: 25px; left: 525px;
                 width: 150px; height: 75px;
                 z-index: 1;"/ -->

            <!-- Class Teacher's Sign. , Headmaster's Sign. -->
            <div class="row no-gutters"
                 style="position: absolute; bottom: 10px; width: 100%;">
                <div class="col-xs-6 custom-padding" style="padding-left: 30px">
                    Class Teacher's Signature
                </div>
                <div class="col-xs-6 custom-padding" style="padding-right: 40px" align="end">
                    Principal's Signature
                </div>
            </div>

        </div>

    </ng-container>

</ng-container>


