<div class="card-content">

    <ng-container *ngIf="!isLoading">

        <div class="row">
            <div class="col-sm-6">
                <form class="example-form">
                    <mat-form-field class="example-full-width">
                        <input matInput
                               name="searchParamter"
                               type="number"
                               (keypress)="policeNumberInput($event)"
                               [(ngModel)]="searchParameter"
                               placeholder="Type Fee Receipt No. / Check No. here ..."value="Sushi">
                    </mat-form-field>
                </form>
            </div>
            <div class="col-sm-3">
                <button class="btn btn-{{user.activeSchool.secondaryThemeColor}}"
                        (click)="serviceAdapter.getFeeReceiptList()">
                    Get
                </button>
            </div>
        </div>

        <ng-container *ngIf="feeReceiptList">

            <div class="row" style="margin-bottom: 30px;">
                <div class="col-md-12"
                     style="border-bottom: 1px solid lightgrey;"></div>
            </div>

            <ng-container *ngIf="feeReceiptList.length > 0; else emptyFeeReceiptList">

                <mat-accordion>

                    <ng-container *ngFor="let feeReceipt of feeReceiptList; let i=index; let first=first">

                        <mat-expansion-panel [expanded]="feeReceiptList.length == 1 && first">

                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    <span>
                                        {{getStudent(feeReceipt).name}},
                                        Amount: {{getFeeReceiptTotalAmount(feeReceipt)}}
                                    </span>
                                </mat-panel-title>
                            </mat-expansion-panel-header>

                            <div class="row">
                                <div class="col-sm-2 col-xs-6">
                                    Receipt No. :
                                </div>
                                <div class="col-sm-2 col-xs-6">
                                    {{feeReceipt.receiptNumber}}
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-2 col-xs-6">
                                    Father's Name:
                                </div>
                                <div class="col-sm-2 col-xs-6">
                                    {{getStudent(feeReceipt).fathersName}}
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-2 col-xs-6">
                                    Mode of Payment:
                                </div>
                                <div class="col-sm-2 col-xs-6">
                                    {{feeReceipt.modeOfPayment}}
                                    <span *ngIf="feeReceipt.modeOfPayment == modeOfPaymentList[1]">
                                        {{feeReceipt.checkNumber}}
                                    </span>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-2 col-xs-6">
                                    Remark:
                                </div>
                                <div class="col-sm-2 col-xs-6">
                                    {{feeReceipt.remark}}
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-2 col-xs-6">
                                    Collected By:
                                </div>
                                <div class="col-sm-2 col-xs-6">
                                    {{getEmployeeName(feeReceipt)}}
                                </div>
                            </div>

                            <button type="button"
                                    class="btn btn-{{user.activeSchool.secondaryThemeColor}}"
                                    *ngIf="!feeReceipt.cancelled"
                                    style="padding: 12px 15px"
                                    matTooltip="Cancel the receipt"
                                    tooltip-position="right"
                                    (click)="serviceAdapter.cancelFeeReceipt(feeReceipt);">
                                Cancel</button>

                            <span *ngIf="feeReceipt.cancelled">This fee receipt is cancelled</span>

                        </mat-expansion-panel>

                    </ng-container>

                </mat-accordion>

            </ng-container>

            <ng-template #emptyFeeReceiptList>
                No Receipt Found
            </ng-template>

        </ng-container>

    </ng-container>

    <ng-container *ngIf="isLoading">
        <app-loading-spinner [user]="user"></app-loading-spinner>
    </ng-container>

</div>
