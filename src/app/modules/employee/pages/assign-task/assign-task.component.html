<div class="card-content">

    <ng-container *ngIf="employeeList && employeeList.length>0">

        <form class="example-form">
            <mat-form-field class="example-full-width">
                <input type="text"
                       placeholder="Type employee name here...."
                       aria-label="Employee"
                       matInput
                       [formControl]="myControl"
                       [matAutocomplete]="auto">
                <mat-autocomplete #auto="matAutocomplete"
                                  (optionSelected)="getEmployeePermissionList($event.option.value)"
                                  [displayWith]="displayFn">
                    <mat-option *ngFor="let employee of filteredEmployeeList | async" [value]="employee">
                        {{ employee.name }}
                    </mat-option>
                </mat-autocomplete>
            </mat-form-field>
        </form>

        <ng-container *ngIf="selectedEmployee && !isLoading">

            <span style="font-weight: 800; font-size: 20px">{{selectedEmployee.name}}</span><br/>

            <ng-container *ngFor="let module of moduleList">
                <span style="font-weight: 800">{{module.title}}</span><br/>
                <ng-container *ngFor="let task of module.taskList">
                    <mat-checkbox [ngModel]="task.employeePermissionId !== null"
                                  (ngModelChange)="updateEmployeePermission(task)"
                                  [disabled]="isDisabled(module,task)">
                        {{task.title}}
                        <br/>
                    </mat-checkbox>
                    <div *ngIf="task.permissionLoading" class="loader-custom"></div>
                    <br/>
                </ng-container>
            </ng-container>

        </ng-container>

    </ng-container>

</div>

<ng-container *ngIf="isLoading">
    <app-loading-spinner [user]="user"></app-loading-spinner>
</ng-container>
