<div class="card-content">

  <parent-student-filter [user]="user"
                         (onDataLoaded)="handleDetailsFromParentStudentFilter($event)"
                         (onStudentListSelected)="serviceAdapter.getStudentDetails($event)"
                         (onStudentListLoading)="isStudentListLoading=$event;"
                         [selectedFilterType]="'Student'"
                         [bothFilters]="bothFilters"
                         [studentTcGenerated]="false"></parent-student-filter>

  <div class="row" style="margin-bottom: 30px;">
    <div class="col-md-12" style="border-bottom: 1px solid lightgrey;"></div>
  </div>

  <ng-container *ngIf="!isStudentListLoading">

        <ng-container *ngIf="selectedStudent && !isLoading">

            <div class="row">

                <div class="col-md-3 visible-sm visible-xs" align="center">

                  <img *ngIf="selectedStudent.profileImage"
                       src="{{selectedStudent.profileImage}}"
                       style="width: 50%">

                  <img *ngIf="!selectedStudent.profileImage"
                       src="https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg"
                       style="width: 50%"/>

                </div>

                <div class="col-md-9">

                    <!-- Name, Father's Name, Mother's Name -->
                    <div class="row">
                      <div class="col-md-4">
                        <mat-form-field  style="width: 100%;">
                          <mat-label>Name</mat-label>
                          <input matInput
                                 type="text"
                                 [ngModel]="selectedStudent.name" readonly>
                        </mat-form-field>
                      </div>
                      <div class="col-md-4">
                        <mat-form-field  style="width: 100%;">
                          <mat-label>Father's Name</mat-label>
                          <input matInput
                                 type="text"
                                 [ngModel]="selectedStudent.fathersName" readonly>
                        </mat-form-field>

                      </div>
                      <div class="col-md-4">
                        <mat-form-field  style="width: 100%;">
                          <mat-label>Mother's Name</mat-label>
                          <input matInput
                                 type="text"
                                 [ngModel]="selectedStudent.motherName" readonly>
                        </mat-form-field>
                      </div>
                    </div>

                    <!-- Roll No., Scholar No., Date of Birth -->
                    <div class="row">
                      <div class="col-md-4">
                        <mat-form-field  style="width: 100%;">
                          <mat-label>Roll No.</mat-label>
                          <input matInput
                                 type="text"
                                 [ngModel]="selectedStudent.rollNumber" readonly>
                        </mat-form-field>
                      </div>

                      <div class="col-md-4">
                        <mat-form-field  style="width: 100%;">
                          <mat-label>Scholar No.</mat-label>
                          <input matInput
                                 type="text"
                                 [ngModel]="selectedStudent.scholarNumber" readonly>
                        </mat-form-field>

                      </div>
                      <div class="col-md-4">
                        <mat-form-field  style="width: 100%;">
                          <mat-label>Date of Birth</mat-label>
                          <input matInput
                                 type="date"
                                 [ngModel]="selectedStudent.dateOfBirth" readonly>
                        </mat-form-field>
                      </div>
                    </div>

                </div>

                <div class="col-md-3 visible-md visible-lg visible-xl" align="center">

                  <img *ngIf="selectedStudent.profileImage" src="{{selectedStudent.profileImage}}" style="width: 50%">

                  <img *ngIf="!selectedStudent.profileImage" src="https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg" style="width: 50%" />

                </div>

            </div>

            <!-- Address, Remark -->
            <div class="row">
              <div class="col-md-6">
                <mat-form-field  style="width: 100%;">
                  <mat-label>Address</mat-label>
                  <textarea matInput
                            type="text"
                            rows="3"
                            [ngModel]="selectedStudent.address" readonly>
                          </textarea>
                </mat-form-field>
              </div>
              <div class="col-md-6">
                <mat-form-field  style="width: 100%;">
                  <mat-label>Remark</mat-label>
                  <textarea matInput
                            type="text"
                            rows="3"
                            [ngModel]="selectedStudent.remark" readonly>
                          </textarea>
                </mat-form-field>
              </div>
            </div>

            <span *ngIf="enableDeleteFromSession()">
                <button type="submit"
                        style="margin-right: 10px;"
                        class="btn btn-{{user.activeSchool.secondaryThemeColor}}"
                        (click)="serviceAdapter.deleteStudentFromSession();">
                  Delete from this session
                </button>
            </span>

            <span *ngIf="!selectedStudent.deleted
                        && selectedStudentFeeReceiptList.length == 0
                        && selectedStudentDiscountList.length == 0; else noDeletion">
                <button type="submit"
                        class="btn btn-{{user.activeSchool.secondaryThemeColor}}"
                        (click)="serviceAdapter.deleteStudent();">
                  Delete Overall
                </button>
            </span>

            <ng-template #noDeletion>
                <br/>
                Can not delete student overall because <br/>
                <ng-container *ngIf="selectedStudent.deleted">Student is already deleted<br/></ng-container>
                <ng-container *ngIf="selectedStudentFeeReceiptList.length != 0">Fee Receipt/s have been issued for the student<br/></ng-container>
                <ng-container *ngIf="selectedStudentDiscountList.length != 0">Discount/s have been issued for the student<br/></ng-container>
            </ng-template>

            <div class="clearfix"></div>

        </ng-container>

    </ng-container>

</div>

<ng-container *ngIf="isLoading || isStudentListLoading">
  <app-loading-spinner [user]="user"></app-loading-spinner>
</ng-container>
