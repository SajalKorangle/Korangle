<div class="card-content table-responsive">

            <!-- Class Filter -->
            <mat-form-field style="margin-right: 15px;">
                <mat-select placeholder="Select Class" style="width: 100%;">

                    <mat-option>
                        <button class="btn"
                                style="padding: 4px 7px"
                                (click)="selectAllClasses(); $event.stopPropagation();">Select All
                        </button>
                        <button class="btn"
                                style="padding: 4px 7px"
                                (click)="unselectAllClasses(); $event.stopPropagation();">Clear All
                        </button>
                    </mat-option>

                    <ng-container *ngFor="let class of classSectionList">
                        <ng-container *ngFor="let section of class.sectionList">
                            <mat-option *ngIf="section.containsStudent" style="width: 100%;">
                                <mat-checkbox [(ngModel)]="section.selected"
                                              (ngModelChange)="handleStudentDisplay()"
                                              (click)="$event.stopPropagation();">
                                    {{class.name}}<span *ngIf="showSectionName(class)">, {{section.name}}</span>
                                </mat-checkbox>
                            </mat-option>
                        </ng-container>
                    </ng-container>

                    <mat-option>
                        <button class="btn"
                                style="padding: 4px 7px"
                                (click)="selectAllClasses(); $event.stopPropagation();">Select All
                        </button>
                        <button class="btn"
                                style="padding: 4px 7px"
                                (click)="unselectAllClasses(); $event.stopPropagation();">Clear All
                        </button>
                    </mat-option>

                </mat-select>
            </mat-form-field>

            <!-- Column Filter -->
            <mat-form-field style="margin-right: 15px;">
                <mat-select placeholder="Select Columns">
                    <mat-option>
                        <button class="btn"
                                style="padding: 4px 7px"
                                (click)="showAllColumns(); $event.stopPropagation();">Select All
                        </button>
                        <button class="btn"
                                style="padding: 4px 7px"
                                (click)="hideAllColumns(); $event.stopPropagation();">Clear All
                        </button>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showSerialNumber" (click)="$event.stopPropagation();">Serial No.
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showName" (click)="$event.stopPropagation();">Name
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showClassName" (click)="$event.stopPropagation();">Class Name
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showRollNumber" (click)="$event.stopPropagation();">Roll No.
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showFathersName" (click)="$event.stopPropagation();">Father's
                            Name
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showMobileNumber" (click)="$event.stopPropagation();">Mobile No.
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showScholarNumber" (click)="$event.stopPropagation();">Scholar
                            No.
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showDateOfBirth" (click)="$event.stopPropagation();">Date of
                            Birth
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showMotherName" (click)="$event.stopPropagation();">Mother's
                            Name
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showGender" (click)="$event.stopPropagation();">Gender
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showCaste" (click)="$event.stopPropagation();">Caste
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showCategory" (click)="$event.stopPropagation();">Category
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showReligion" (click)="$event.stopPropagation();">Religion
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showFatherOccupation" (click)="$event.stopPropagation();">
                            Father's
                            Occupation
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showAddress" (click)="$event.stopPropagation();">Address
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showChildSSMID" (click)="$event.stopPropagation();">Child SSMID
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showFamilySSMID" (click)="$event.stopPropagation();">Family
                            SSMID
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showBankName" (click)="$event.stopPropagation();">Bank Name
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showBankAccountNum" (click)="$event.stopPropagation();">Bank
                            Acc.
                            No.
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showAadharNum" (click)="$event.stopPropagation();">Aadhar No.
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showBloodGroup" (click)="$event.stopPropagation();">Blood Group
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showFatherAnnualIncome" (click)="$event.stopPropagation();">
                            Father's Annual Income
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="columnFilter.showRTE" (click)="$event.stopPropagation();">
                            RTE
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <button class="btn"
                                style="padding: 4px 7px"
                                (click)="showAllColumns(); $event.stopPropagation();">Select All
                        </button>
                        <button class="btn"
                                style="padding: 4px 7px"
                                (click)="hideAllColumns(); $event.stopPropagation();">Clear All
                        </button>
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <!-- Other Filters -->
            <mat-form-field style="float: right;">
                <mat-select placeholder="Filters">
                    <mat-option>
                        <mat-checkbox [(ngModel)]="scSelected"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">SC,
                        </mat-checkbox>
                        <mat-checkbox [(ngModel)]="stSelected"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">ST,
                        </mat-checkbox>
                        <mat-checkbox [(ngModel)]="obcSelected"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">OBC,
                        </mat-checkbox>
                        <mat-checkbox [(ngModel)]="generalSelected"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">Gen.
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        <mat-checkbox [(ngModel)]="maleSelected"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">M
                        </mat-checkbox>
                        <mat-checkbox [(ngModel)]="femaleSelected"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">F
                        </mat-checkbox>
                        <mat-checkbox [(ngModel)]="otherGenderSelected"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">Other
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        Admission:
                        <mat-checkbox [(ngModel)]="newAdmission"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">New
                        </mat-checkbox>
                        <mat-checkbox [(ngModel)]="oldAdmission"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">Old
                        </mat-checkbox>
                    </mat-option>
                    <mat-option>
                        RTE:
                        <mat-checkbox [(ngModel)]="yesRTE"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">Yes
                        </mat-checkbox>
                        <mat-checkbox [(ngModel)]="noRTE"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">No
                        </mat-checkbox>
                        <mat-checkbox [(ngModel)]="unknownRTE"
                                      style="margin-right: 5px;"
                                      (ngModelChange)="handleStudentDisplay()"
                                      (click)="$event.stopPropagation();">Unknown
                        </mat-checkbox>
                    </mat-option>
                </mat-select>
            </mat-form-field>


    <br><i>Selected {{displayStudentNumber}} out of {{studentFullProfileList.length}} students</i>

    <!-- Student Table List -->
    <ng-container *ngIf="!isLoading">
        <cdk-virtual-scroll-viewport itemSize="50" class="example-viewport">
            <table class="table table-hover">
                <thead class="text-{{user.activeSchool.secondaryThemeColor}}">
                <tr>
									<th *ngFor="let column of COLUMNHANDLES" [class.hidden]="!column.show">
											{{column.name}}
									</th>
                </tr>
                </thead>
                <tbody>
                <ng-container *cdkVirtualFor="let student of studentFullProfileList">
                    <tr [class.hidden]="!student.show">
                        <td *ngFor="let column of COLUMNHANDLES" [class.hidden]="!column.show" [attr.id]="column.fieldName+student.dbId">
                            <ng-container *ngIf="column.inputType===null">
                                {{student[column.key]}}
                            </ng-container>
                            <input [attr.type]="column.inputType"
                                         class="customInput"
                                         [class.hidden]="!column.showLock"
                                         [disabled]="column.locked"
                                         (blur)="updateStudentField(column.fieldName,student, $event.target)"
                                         [ngModel]="student[column.fieldName]"/>
                            <span [class.hidden]="column.showLock">{{student[column.fieldName]}}</span>
                        </td>
                    </tr>
                </ng-container>
                </tbody>
            </table>
        </cdk-virtual-scroll-viewport>
    </ng-container>

</div>

<ng-container *ngIf="isLoading">
    <app-loading-spinner [user]="user"></app-loading-spinner>
</ng-container>

