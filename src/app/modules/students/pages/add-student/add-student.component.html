<div class="card-content">

    <ng-container *ngIf="!isLoading">

        <!-- Name, Father's Name, Class, Mobile Number -->
        <div class="row">
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Name</label>
                    <input type="text"
                           class="form-control"
                           [(ngModel)]="newStudent.name">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Father's Name</label>
                    <input type="text"
                           class="form-control"
                           [(ngModel)]="newStudent.fathersName">
                </div>
            </div>
            <div class="col-md-3" *ngIf="newStudentSection.parentClass && newStudentSection.parentDivision">
                <mat-form-field style="margin-top: 23px;">
                    <mat-select placeholder="Select Class"
                                #selectClassSection
                                [ngModel]="newStudentSection.parentClass"
                                (ngModelChange)="newStudentSection.parentClass=$event;">
                        <mat-option *ngFor='let classs of classList;' [value]="classs.dbId">
                            {{classs.name}}, {{getSection(newStudentSection.parentDivision).name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <button class="btn"
                        style="padding: 2px 11px; background-color: transparent;"
                        [matTooltip]="'Choose Section (default: Section - A)'"
                        mat-icon-button
                        [matMenuTriggerFor]="classSectionMenu">
                    <i class="material-icons" style="color: black;">expand_more</i>
                </button>
                <mat-menu #classSectionMenu="matMenu">
                    <button *ngFor="let section of sectionList"
                            mat-menu-item
                            (click)="selectClassSection.open(); selectClassSection.close(); newStudentSection.parentDivision=section.id">
                        {{section.name}}
                    </button>
                </mat-menu>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Mobile Number
                        <span *ngIf="checkLength(newStudent.mobileNumber)"
                              [class.fieldRight]="checkRight(newStudent.mobileNumber,10)">
                                        - {{newStudent.mobileNumber.toString().length}}</span>
                    </label>
                    <input type="number"
                           class="form-control"
                           [ngModel]="newStudent.mobileNumber"
                           (keypress)="policeNumberInput($event)"
                           (ngModelChange)="newStudent.mobileNumber=$event">
                </div>
            </div>
        </div>

        <!-- Date of Birth,  Mother's Name, Scholar No., Roll No. -->
        <div class="row">
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Date of Birth</label>
                    <input type="date"
                           class="form-control"
                           [(ngModel)]="newStudent.dateOfBirth">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Mother's Name</label>
                    <input type="text"
                           class="form-control"
                           [(ngModel)]="newStudent.motherName">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Scholar No.</label>
                    <input type="text"
                           class="form-control"
                           [(ngModel)]="newStudent.scholarNumber">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Roll No.</label>
                    <input type="text"
                           class="form-control"
                           [(ngModel)]="newStudentSection.rollNumber">
                </div>
            </div>
        </div>

        <!-- Gender, Category, Religion, Blood Group -->
        <div class="row">
            <div class="col-md-3">
                <mat-form-field>
                    <mat-select placeholder="Gender"
                                [(ngModel)]="newStudent.gender">
                        <mat-option>None</mat-option>
                        <mat-option value="Male">Male</mat-option>
                        <mat-option value="Female">Female</mat-option>
                        <mat-option value="Other">Other</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <mat-form-field>
                    <mat-select placeholder="Category"
                                [(ngModel)]="newStudent.newCategoryField">
                        <mat-option>None</mat-option>
                        <mat-option value="SC">SC</mat-option>
                        <mat-option value="ST">ST</mat-option>
                        <mat-option value="OBC">OBC</mat-option>
                        <mat-option value="Gen.">Gen.</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <mat-form-field>
                    <mat-select placeholder="Religion"
                                [(ngModel)]="newStudent.newReligionField"
                    >
                        <mat-option>None</mat-option>
                        <mat-option value="Hinduism">Hinduism</mat-option>
                        <mat-option value="Islam">Islam</mat-option>
                        <mat-option value="Christianity">Christianity</mat-option>
                        <mat-option value="Jainism">Jainism</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <mat-form-field>
                    <mat-select placeholder="Blood Group"
                                [(ngModel)]="newStudent.bloodGroup"
                    >
                        <mat-option>None</mat-option>
                        <mat-option value="A -">A -</mat-option>
                        <mat-option value="A +">A +</mat-option>
                        <mat-option value="B -">B -</mat-option>
                        <mat-option value="B +">B +</mat-option>
                        <mat-option value="AB -">AB -</mat-option>
                        <mat-option value="AB +">AB +</mat-option>
                        <mat-option value="O -">O -</mat-option>
                        <mat-option value="O +">O +</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        <!-- Child SSMID, Family SSMID, Aadhar Number, Caste -->
        <div class="row">
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Family SSMID
                        <span *ngIf="checkLength(newStudent.familySSMID)"
                              [class.fieldRight]="checkRight(newStudent.familySSMID,8)">
                                        - {{newStudent.familySSMID.toString().length}}</span>
                    </label>
                    <input type="number"
                           class="form-control"
                           [ngModel]="newStudent.familySSMID"
                           (keypress)="policeNumberInput($event)"
                           (ngModelChange)="newStudent.familySSMID=$event">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Child SSMID
                        <span *ngIf="checkLength(newStudent.childSSMID)"
                              [class.fieldRight]="checkRight(newStudent.childSSMID,9)">
                                        - {{newStudent.childSSMID.toString().length}}</span>
                    </label>
                    <input type="number"
                           class="form-control"
                           [ngModel]="newStudent.childSSMID"
                           (keypress)="policeNumberInput($event)"
                           (ngModelChange)="newStudent.childSSMID=$event">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Aadhar Number
                        <span *ngIf="checkLength(newStudent.aadharNum)"
                              [class.fieldRight]="checkRight(newStudent.aadharNum,12)">
                                        - {{newStudent.aadharNum.toString().length}}</span>
                    </label>
                    <input type="number"
                           class="form-control"
                           [ngModel]="newStudent.aadharNum"
                           (keypress)="policeNumberInput($event)"
                           (ngModelChange)="newStudent.aadharNum=$event">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Caste</label>
                    <input type="text"
                           class="form-control"
                           [(ngModel)]="newStudent.caste">
                </div>
            </div>
        </div>

        <!-- RTE, Bus Stop, Admission Session, Date of Admission -->
        <div class="row">
            <div class="col-md-3">
                <mat-form-field>
                    <mat-select placeholder="RTE"
                                [(ngModel)]="newStudent.rte"
                    >
                        <mat-option value="YES">Yes</mat-option>
                        <mat-option value="NO">No</mat-option>
                        <mat-option value="UNKNOWN">Unknown</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div *ngIf="busStopList.length > 0" class="col-md-3">
                <mat-form-field>
                    <mat-select placeholder="Bus Stop"
                                [(ngModel)]="newStudent.currentBusStop">
                        <mat-option [value]="nullValue">None</mat-option>
                        <mat-option *ngFor="let busStop of busStopList" value="{{busStop.id}}">
                            {{busStop.stopName}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <mat-form-field>
                    <mat-select placeholder="Admission Session"
                                [(ngModel)]="newStudent.admissionSession">
                        <mat-option [value]="nullValue">None</mat-option>
                        <mat-option [value]="user.activeSchool.currentSessionDbId">{{getCurrentSessionName()}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Date of Admission</label>
                    <input type="date"
                           class="form-control"
                           [(ngModel)]="newStudent.dateOfAdmission">
                </div>
            </div>
        </div>

        <!-- Bank Name, Bank Account Number, Bank Ifsc Code -->
        <div class="row">
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Bank Name</label>
                    <input type="text"
                           class="form-control"
                           [(ngModel)]="newStudent.bankName">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Bank Account Number</label>
                    <input type="text"
                           class="form-control"
                           [(ngModel)]="newStudent.bankAccountNum">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Bank Ifsc Code</label>
                    <input type="text"
                           class="form-control"
                           [(ngModel)]="newStudent.bankIfscCode">
                </div>
            </div>
        </div>

        <!-- Father's Occupation, Father's Annual Income -->
        <div class="row">
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Father's Occupation</label>
                    <input type="text"
                           class="form-control"
                           [(ngModel)]="newStudent.fatherOccupation">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Father's Annual Income</label>
                    <input type="text"
                           class="form-control"
                           [(ngModel)]="newStudent.fatherAnnualIncome">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group form-black label-floating">
                    <label class="control-label">Aternate Mobile Number
                        <span *ngIf="checkLength(newStudent.secondMobileNumber)"
                              [class.fieldRight]="checkRight(newStudent.secondMobileNumber,10)">
                                        - {{newStudent.secondMobileNumber.toString().length}}</span>
                    </label>
                    <input type="number"
                           class="form-control"
                           [ngModel]="newStudent.secondMobileNumber"
                           (keypress)="policeNumberInput($event)"
                           (ngModelChange)="newStudent.secondMobileNumber=$event">
                </div>
            </div>
        </div>

        <!-- Address, Remark -->
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <div class="form-group form-black label-floating">
                        <label class="control-label">Address</label>
                        <textarea class="form-control" rows="3"
                                  [(ngModel)]="newStudent.address"></textarea>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <div class="form-group form-black label-floating">
                        <label class="control-label">Remark</label>
                        <textarea class="form-control" rows="3"
                                  [(ngModel)]="newStudent.remark"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <button type="submit"
                class="btn btn-{{user.activeSchool.secondaryThemeColor}}"
                (click)="serviceAdapter.createNewStudent()">Create Profile</button>

    </ng-container>

</div>

<ng-container *ngIf="isLoading">
    <app-loading-spinner [user]="user"></app-loading-spinner>
</ng-container>
